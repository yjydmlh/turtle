# =============================================================================
# 缠论分析系统环境变量配置示例
# 复制此文件为 .env 并填入实际配置值
# =============================================================================

# -----------------------------------------------------------------------------
# 应用基础配置
# -----------------------------------------------------------------------------

# 应用名称
APP_NAME=turtle

# 项目名称
PROJECT_NAME=缠论分析系统

# 运行环境 (development/production)
ENVIRONMENT=development

# 调试模式 (true/false)
DEBUG=true

# 密钥（用于JWT等加密，生产环境请使用随机生成的强密钥）
SECRET_KEY=your-super-secret-key-change-this-in-production

# JWT算法
ALGORITHM=HS256

# 访问令牌过期时间（分钟）
ACCESS_TOKEN_EXPIRE_MINUTES=30

# -----------------------------------------------------------------------------
# 服务器配置
# -----------------------------------------------------------------------------

# API服务器主机
HOST=0.0.0.0

# API服务器端口
PORT=8000

# WebSocket服务器主机
WS_HOST=0.0.0.0

# WebSocket服务器端口
WS_PORT=8001

# API版本路径
API_V1_STR=/api/v1

# -----------------------------------------------------------------------------
# 数据库配置
# -----------------------------------------------------------------------------

# PostgreSQL数据库连接URL
# 格式: postgresql://用户名:密码@主机:端口/数据库名?选项
DATABASE_URL=postgresql://postgres:123456@127.0.0.1:5432/turtle?client_encoding=utf8



# 数据库连接池配置
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=1800

# -----------------------------------------------------------------------------
# CORS配置（跨域资源共享）
# -----------------------------------------------------------------------------

# 允许的来源列表，生产环境请限制为具体域名
# 开发环境可以使用 "*" 允许所有来源
CORS_ORIGINS=["http://localhost:3000", "http://localhost:5173", "http://127.0.0.1:3000"]

# 或者允许所有来源（仅开发环境）
# CORS_ORIGINS=["*"]

# -----------------------------------------------------------------------------
# 日志配置
# -----------------------------------------------------------------------------

# 日志级别 (DEBUG/INFO/WARNING/ERROR/CRITICAL)
LOG_LEVEL=DEBUG

# 日志格式
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s

# 日志文件路径
LOG_FILE=logs/app.log

# 日志文件大小限制（字节）
LOG_MAX_SIZE=10485760

# 日志文件备份数量
LOG_BACKUP_COUNT=5

# -----------------------------------------------------------------------------
# 币安API配置（可选）
# -----------------------------------------------------------------------------

# 币安API基础URL
BINANCE_API_BASE_URL=https://api.binance.com

# 币安测试网API（开发测试用）
# BINANCE_TESTNET_API_BASE_URL=https://testnet.binance.vision

# 币安API密钥（如果需要私有API访问）
# BINANCE_API_KEY=your_binance_api_key

# 币安API密钥（如果需要私有API访问）
# BINANCE_SECRET_KEY=your_binance_secret_key

# API请求超时时间（秒）
API_TIMEOUT=30

# API请求重试次数
API_RETRY_COUNT=3

# -----------------------------------------------------------------------------
# 缠论分析配置
# -----------------------------------------------------------------------------

# 默认分析时间周期
DEFAULT_TIMEFRAME=1h

# 默认K线数据量
DEFAULT_KLINE_LIMIT=200

# 分型识别最小距离
FENXING_MIN_DISTANCE=3

# 笔的最小长度
BI_MIN_LENGTH=5

# 线段的最小长度
XIANDUAN_MIN_LENGTH=3

# 分析质量阈值
ANALYSIS_QUALITY_THRESHOLD=0.6

# -----------------------------------------------------------------------------
# 缓存配置
# -----------------------------------------------------------------------------

# 数据缓存时间（秒）
CACHE_DURATION=300

# K线数据缓存时间（秒）
KLINE_CACHE_DURATION=60

# 分析结果缓存时间（秒）
ANALYSIS_CACHE_DURATION=300

# -----------------------------------------------------------------------------
# 前端配置
# -----------------------------------------------------------------------------

# 前端静态文件目录
STATIC_DIR=static

# 前端构建目录
BUILD_DIR=frontend/dist

# 前端开发服务器URL
FRONTEND_DEV_URL=http://localhost:3000

# API基础URL（前端使用）
VITE_API_BASE_URL=http://localhost:8000

# -----------------------------------------------------------------------------
# 数据获取配置
# -----------------------------------------------------------------------------

# 自动数据获取间隔（分钟）
AUTO_FETCH_INTERVAL=5

# 数据获取批次大小
FETCH_BATCH_SIZE=1000

# 历史数据获取天数限制
MAX_HISTORY_DAYS=365

# 数据获取超时时间（秒）
FETCH_TIMEOUT=60

# -----------------------------------------------------------------------------
# 安全配置
# -----------------------------------------------------------------------------

# 启用HTTPS重定向（生产环境）
HTTPS_REDIRECT=false

# 安全头配置
SECURITY_HEADERS=true

# CSP（内容安全策略）
CSP_ENABLED=false

# HSTS（HTTP严格传输安全）
HSTS_ENABLED=false

# -----------------------------------------------------------------------------
# 监控和分析配置
# -----------------------------------------------------------------------------

# 启用性能监控
PERFORMANCE_MONITORING=true

# 启用错误追踪
ERROR_TRACKING=true

# 统计数据收集
ANALYTICS_ENABLED=false

# 监控API端点
HEALTH_CHECK_ENABLED=true

# -----------------------------------------------------------------------------
# WebSocket配置
# -----------------------------------------------------------------------------

# WebSocket连接超时（秒）
WS_TIMEOUT=60

# WebSocket心跳间隔（秒）
WS_HEARTBEAT_INTERVAL=30

# 最大WebSocket连接数
WS_MAX_CONNECTIONS=100

# -----------------------------------------------------------------------------
# 邮件配置（可选）
# -----------------------------------------------------------------------------

# SMTP服务器配置
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your_email@gmail.com
# SMTP_PASSWORD=your_app_password
# SMTP_TLS=true

# 发件人邮箱
# FROM_EMAIL=noreply@your-domain.com

# -----------------------------------------------------------------------------
# 第三方服务配置
# -----------------------------------------------------------------------------

# Redis配置（如果使用Redis缓存）
# REDIS_URL=redis://localhost:6379/0

# 消息队列配置（如果使用Celery等）
# CELERY_BROKER_URL=redis://localhost:6379/0
# CELERY_RESULT_BACKEND=redis://localhost:6379/0

# -----------------------------------------------------------------------------
# 部署配置
# -----------------------------------------------------------------------------

# 工作进程数量（生产环境）
WORKERS=1

# 每个工作进程的线程数
THREADS=1

# 最大请求数（进程重启阈值）
MAX_REQUESTS=1000

# 最大请求抖动
MAX_REQUESTS_JITTER=100

# 进程超时时间（秒）
TIMEOUT=30

# Keep-alive超时时间（秒）
KEEPALIVE=2

# -----------------------------------------------------------------------------
# 开发配置
# -----------------------------------------------------------------------------

# 启用自动重载（开发环境）
RELOAD=true

# 启用访问日志
ACCESS_LOG=true

# 启用调试工具栏
DEBUG_TOOLBAR=false

# 启用API文档
ENABLE_DOCS=true

# API文档URL路径
DOCS_URL=/api/v1/docs

# ReDoc文档URL路径
REDOC_URL=/api/v1/redoc

# -----------------------------------------------------------------------------
# 测试配置
# -----------------------------------------------------------------------------

# 测试数据库URL
TEST_DATABASE_URL=postgresql://postgres:123456@127.0.0.1:5432/turtle_test?client_encoding=utf8

# 测试环境标识
TESTING=false

# 测试数据目录
TEST_DATA_DIR=tests/data

# -----------------------------------------------------------------------------
# 备份配置
# -----------------------------------------------------------------------------

# 自动备份启用
AUTO_BACKUP=false

# 备份目录
BACKUP_DIR=backups

# 备份间隔（小时）
BACKUP_INTERVAL=24

# 备份保留天数
BACKUP_RETENTION_DAYS=30

# -----------------------------------------------------------------------------
# 国际化配置
# -----------------------------------------------------------------------------

# 默认语言
DEFAULT_LANGUAGE=zh-CN

# 支持的语言列表
SUPPORTED_LANGUAGES=["zh-CN", "en-US"]

# 时区设置
TIMEZONE=Asia/Shanghai

# 日期格式
DATE_FORMAT=%Y-%m-%d %H:%M:%S

# -----------------------------------------------------------------------------
# 特性开关
# -----------------------------------------------------------------------------

# 启用实时数据推送
REALTIME_PUSH=true

# 启用数据导出功能
ENABLE_EXPORT=true

# 启用数据导入功能
ENABLE_IMPORT=true

# 启用用户系统（如果计划添加用户功能）
ENABLE_USER_SYSTEM=false

# 启用API限流
ENABLE_RATE_LIMITING=true

# API请求频率限制（每分钟）
RATE_LIMIT_PER_MINUTE=60

# -----------------------------------------------------------------------------
# 说明和注意事项
# -----------------------------------------------------------------------------

# 1. 生产环境部署前请务必修改所有密钥和敏感信息
# 2. PostgreSQL是推荐的生产数据库
# 3. 请根据服务器配置调整连接池和工作进程数量
# 4. 在防火墙中开放相应的端口（默认8000和8001）
# 5. 定期备份数据库和重要配置文件
# 6. 生产环境建议启用HTTPS和相关安全配置
# 7. 监控日志文件大小，避免磁盘空间不足
# 8. 根据实际需求调整缓存和超时配置