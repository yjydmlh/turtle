# å¼€å‘æŒ‡å—

<cite>
**æœ¬æ–‡æ¡£å¼•ç”¨çš„æ–‡ä»¶**  
- [README.md](file://README.md)
- [requirements.txt](file://requirements.txt)
- [frontend/package.json](file://frontend/package.json)
- [app/main.py](file://app/main.py)
- [test_chan_integration.py](file://test_chan_integration.py)
- [chan.py/README.md](file://chan.py/README.md)
- [frontend/svelte.config.js](file://frontend/svelte.config.js)
- [app/api/v1/endpoints/kline.py](file://app/api/v1/endpoints/kline.py)
- [app/models/kline.py](file://app/models/kline.py)
- [app/schemas/kline.py](file://app/schemas/kline.py)
- [app/crud/kline.py](file://app/crud/kline.py)
- [app/services/kline_aggregator.py](file://app/services/kline_aggregator.py)
- [frontend/src/lib/api.js](file://frontend/src/lib/api.js)
- [frontend/src/lib/components/KLineChart.svelte](file://frontend/src/lib/components/KLineChart.svelte)
</cite>

## ç›®å½•

1. [è´¡çŒ®è€…å¼€å‘æŒ‡å—](#è´¡çŒ®è€…å¼€å‘æŒ‡å—)
2. [å¼€å‘ç¯å¢ƒæ­å»º](#å¼€å‘ç¯å¢ƒæ­å»º)
3. [ä»£ç è§„èŒƒ](#ä»£ç è§„èŒƒ)
4. [æ·»åŠ æ–°åŠŸèƒ½æ•™ç¨‹](#æ·»åŠ æ–°åŠŸèƒ½æ•™ç¨‹)
5. [æµ‹è¯•æŒ‡å—](#æµ‹è¯•æŒ‡å—)
6. [å·¥å…·é“¾ä¸è‡ªåŠ¨åŒ–](#å·¥å…·é“¾ä¸è‡ªåŠ¨åŒ–)
7. [Pull Requestå®¡æŸ¥æµç¨‹](#pull-requestå®¡æŸ¥æµç¨‹)
8. [é™„å½•](#é™„å½•)

## è´¡çŒ®è€…å¼€å‘æŒ‡å—

æœ¬å¼€å‘æŒ‡å—æ—¨åœ¨ä¸ºå¸Œæœ›ä¸ºç¼ è®ºåˆ†æç³»ç»Ÿï¼ˆTurtle Chan Analysis Systemï¼‰åšå‡ºè´¡çŒ®çš„å¼€å‘è€…æä¾›å…¨é¢çš„æŒ‡å¯¼ã€‚ç³»ç»ŸåŸºäºç¼ ä¸­è¯´ç¦…ç†è®ºï¼Œé›†æˆäº†å®æ—¶æ•°æ®è·å–ã€å¤šæ—¶é—´å‘¨æœŸèšåˆã€åˆ†å‹è¯†åˆ«ã€ç¬”æ®µæ„å»ºç­‰æ ¸å¿ƒåŠŸèƒ½ï¼Œä¸ºæ•°å­—è´§å¸æŠ€æœ¯åˆ†ææä¾›ä¸“ä¸šæœåŠ¡ã€‚

æœ¬æŒ‡å—å°†è¯¦ç»†ä»‹ç»å¼€å‘ç¯å¢ƒçš„æ­å»ºã€ä»£ç è§„èŒƒã€æ–°åŠŸèƒ½æ·»åŠ çš„åˆ†æ­¥æ•™ç¨‹ã€æµ‹è¯•ç­–ç•¥ã€å·¥å…·é“¾ä½¿ç”¨ä»¥åŠPull Requestçš„å®¡æŸ¥æµç¨‹ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ç¡®ä¿æ‰€æœ‰è´¡çŒ®è€…éƒ½èƒ½éµå¾ªç»Ÿä¸€çš„æ ‡å‡†ï¼Œæäº¤é«˜è´¨é‡çš„ä»£ç ï¼Œå…±åŒç»´æŠ¤é¡¹ç›®çš„ç¨³å®šæ€§å’Œå¯ç»´æŠ¤æ€§ã€‚

ç³»ç»Ÿé‡‡ç”¨ç°ä»£åŒ–çš„æŠ€æœ¯æ ˆï¼Œåç«¯ä½¿ç”¨Python + FastAPIæ„å»ºé«˜æ€§èƒ½å¼‚æ­¥APIæœåŠ¡ï¼Œå‰ç«¯ä½¿ç”¨Svelte + TailwindCSSæä¾›ç°ä»£åŒ–çš„Webç•Œé¢ã€‚æ•°æ®åº“é‡‡ç”¨PostgreSQL + TimescaleDBè¿›è¡Œæ—¶åºæ•°æ®ä¼˜åŒ–ï¼Œå›¾è¡¨å±•ç¤ºä½¿ç”¨Lightweight Chartsåº“ã€‚

æˆ‘ä»¬æ¬¢è¿ä»»ä½•å½¢å¼çš„è´¡çŒ®ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š
- æŠ¥å‘ŠBugå’ŒåŠŸèƒ½å»ºè®®
- ä¿®å¤ä»£ç ç¼ºé™·
- æ·»åŠ æ–°åŠŸèƒ½å’ŒAPIç«¯ç‚¹
- æ”¹è¿›æ–‡æ¡£å’Œç¤ºä¾‹
- ä¼˜åŒ–æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ

é€šè¿‡éµå¾ªæœ¬æŒ‡å—ï¼Œæ‚¨å°†èƒ½å¤Ÿå¿«é€Ÿä¸Šæ‰‹é¡¹ç›®å¼€å‘ï¼Œä¸ºé¡¹ç›®åšå‡ºæœ‰ä»·å€¼çš„è´¡çŒ®ã€‚

**Section sources**
- [README.md](file://README.md#L1-L508)

## å¼€å‘ç¯å¢ƒæ­å»º

### åŸºç¡€ç¯å¢ƒè¦æ±‚

åœ¨å¼€å§‹å¼€å‘ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨çš„ç³»ç»Ÿæ»¡è¶³ä»¥ä¸‹åŸºç¡€ç¯å¢ƒè¦æ±‚ï¼š

- **Python**: 3.8+ (æ¨è3.11+ä»¥è·å¾—æœ€ä½³æ€§èƒ½)
- **Node.js**: 16.0+
- **PostgreSQL**: 12.0+ (æ¨è) æˆ– SQLite (ç”¨äºæµ‹è¯•)
- **æ“ä½œç³»ç»Ÿ**: Windows 10+, macOS 10.15+, Ubuntu 18.04+

### é¡¹ç›®å…‹éš†ä¸åˆå§‹åŒ–

é¦–å…ˆï¼Œå…‹éš†é¡¹ç›®ä»“åº“å¹¶åˆå§‹åŒ–å­æ¨¡å—ï¼š

```bash
git clone https://github.com/your-username/turtle.git
cd turtle

# åˆå§‹åŒ–Chanæ¨¡å—å­æ¨¡å—
git submodule update --init
```

### åç«¯ç¯å¢ƒè®¾ç½®

1. **å®‰è£…Pythonä¾èµ–**ï¼š
```bash
pip install -r requirements.txt
```

2. **é…ç½®ç¯å¢ƒå˜é‡**ï¼š
```bash
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œé…ç½®æ•°æ®åº“è¿æ¥ç­‰
```

3. **åˆ›å»ºæ•°æ®åº“è¡¨**ï¼š
```bash
python create_tables.py
```

4. **è¿è¡Œé›†æˆæµ‹è¯•**ï¼š
```bash
python test_chan_integration.py
```

### å‰ç«¯ç¯å¢ƒè®¾ç½®

1. **è¿›å…¥å‰ç«¯ç›®å½•**ï¼š
```bash
cd frontend
```

2. **å®‰è£…ä¾èµ–**ï¼š
```bash
npm install
```

3. **å¼€å‘æ¨¡å¼å¯åŠ¨**ï¼š
```bash
npm run dev
```

4. **æ„å»ºç”Ÿäº§ç‰ˆæœ¬**ï¼š
```bash
npm run build
```

### ç³»ç»Ÿå¯åŠ¨

ç³»ç»Ÿæä¾›å¤šç§å¯åŠ¨æ–¹å¼ï¼š

1. **å¿«é€Ÿå¯åŠ¨ï¼ˆæ¨èï¼‰**ï¼š
```bash
python quick_start.py
```

2. **æ‰‹åŠ¨å¯åŠ¨**ï¼š
```bash
python run.py
```

3. **å¼€å‘æ¨¡å¼**ï¼š
```bash
uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
```

### è®¿é—®ç³»ç»Ÿ

å¯åŠ¨æˆåŠŸåï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—®ç³»ç»Ÿï¼š

- **APIæ–‡æ¡£**: http://localhost:8000/api/v1/docs
- **Webç•Œé¢**: http://localhost:8000 (å¦‚æœæ„å»ºäº†å‰ç«¯)
- **å¥åº·æ£€æŸ¥**: http://localhost:8000/health

### æ•°æ®åº“é…ç½®

ç³»ç»Ÿæ”¯æŒPostgreSQLå’ŒSQLiteä¸¤ç§æ•°æ®åº“ï¼š

**PostgreSQL (æ¨è)**ï¼š
```bash
# å®‰è£…PostgreSQL
sudo apt-get install postgresql postgresql-contrib  # Ubuntu
brew install postgresql  # macOS

# åˆ›å»ºæ•°æ®åº“
sudo -u postgres createdb turtle

# é…ç½®.envæ–‡ä»¶
DATABASE_URL=postgresql://postgres:your_password@localhost:5432/turtle
```

**SQLite (å¼€å‘æµ‹è¯•)**ï¼š
```bash
# åœ¨.envæ–‡ä»¶ä¸­é…ç½®
DATABASE_URL=sqlite:///./turtle.db
```

**Section sources**
- [README.md](file://README.md#L509-L1017)

## ä»£ç è§„èŒƒ

### Pythonä»£ç è§„èŒƒ

åç«¯ä»£ç éµå¾ªä»¥ä¸‹è§„èŒƒï¼š

1. **PEP 8è§„èŒƒ**ï¼šä¸¥æ ¼éµå®ˆPython PEP 8ç¼–ç è§„èŒƒ
2. **ç±»å‹æç¤º**ï¼šä½¿ç”¨type hintsæé«˜ä»£ç å¯è¯»æ€§å’Œå®‰å…¨æ€§
3. **æ–‡æ¡£å­—ç¬¦ä¸²**ï¼šä¸ºæ‰€æœ‰å‡½æ•°ã€ç±»å’Œæ¨¡å—ç¼–å†™è¯¦ç»†çš„docstring
4. **å¼‚å¸¸å¤„ç†**ï¼šä½¿ç”¨è‡ªå®šä¹‰å¼‚å¸¸ç±»è¿›è¡Œé”™è¯¯å¤„ç†
5. **æ—¥å¿—è®°å½•**ï¼šä½¿ç”¨ç»Ÿä¸€çš„æ—¥å¿—è®°å½•å™¨è¿›è¡Œè°ƒè¯•å’Œç›‘æ§

ç¤ºä¾‹ä»£ç ç»“æ„ï¼š
```python
from fastapi import APIRouter, Depends
from app.core.exceptions import create_success_response

router = APIRouter()

@router.get("/new-endpoint")
def new_endpoint():
    """è·å–æ–°åŠŸèƒ½æ•°æ®
    
    Returns:
        dict: åŒ…å«æˆåŠŸå“åº”çš„æ•°æ®
    """
    return create_success_response(data={"message": "Hello World"})
```

### Svelteå‰ç«¯ä»£ç è§„èŒƒ

å‰ç«¯ä»£ç éµå¾ªä»¥ä¸‹è§„èŒƒï¼š

1. **ç»„ä»¶å‘½å**ï¼šä½¿ç”¨PascalCaseå‘½åç»„ä»¶
2. **å‡½æ•°å‘½å**ï¼šä½¿ç”¨camelCaseå‘½åå‡½æ•°
3. **ä»£ç æ ¼å¼åŒ–**ï¼šä½¿ç”¨Prettierè¿›è¡Œä»£ç æ ¼å¼åŒ–
4. **ç±»å‹æ£€æŸ¥**ï¼šä½¿ç”¨TypeScriptè¿›è¡Œç±»å‹æ£€æŸ¥
5. **æ ·å¼ç®¡ç†**ï¼šä½¿ç”¨TailwindCSSè¿›è¡Œæ ·å¼ç®¡ç†

ç¤ºä¾‹ç»„ä»¶ç»“æ„ï¼š
```svelte
<!-- src/lib/components/NewComponent.svelte -->
<script>
    import { onMount } from 'svelte';
    
    // ç»„ä»¶é€»è¾‘
    let data = [];
    
    onMount(async () => {
        // åˆå§‹åŒ–é€»è¾‘
    });
</script>

<div class="new-component">
    <!-- ç»„ä»¶æ¨¡æ¿ -->
</div>

<style>
    /* ç»„ä»¶æ ·å¼ */
    .new-component {
        @apply p-4 border rounded-lg;
    }
</style>
```

### Gitæäº¤ä¿¡æ¯æ ¼å¼

æ‰€æœ‰Gitæäº¤ä¿¡æ¯å¿…é¡»éµå¾ªä»¥ä¸‹æ ¼å¼ï¼š

```bash
# åŠŸèƒ½å¼€å‘
git commit -m "feat: æ·»åŠ æ–°çš„åˆ†æç®—æ³•"

# é”™è¯¯ä¿®å¤
git commit -m "fix: ä¿®å¤æ•°æ®è·å–è¶…æ—¶é—®é¢˜"

# æ–‡æ¡£æ›´æ–°
git commit -m "docs: æ›´æ–°APIæ–‡æ¡£"

# æ ·å¼è°ƒæ•´
git commit -m "style: è°ƒæ•´å›¾è¡¨æ˜¾ç¤ºæ ·å¼"

# ä»£ç é‡æ„
git commit -m "refactor: é‡æ„Kçº¿èšåˆé€»è¾‘"

# æ€§èƒ½ä¼˜åŒ–
git commit -m "perf: ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½"

# æµ‹è¯•ç›¸å…³
git commit -m "test: æ·»åŠ å•å…ƒæµ‹è¯•ç”¨ä¾‹"
```

æäº¤ä¿¡æ¯æ ¼å¼è¯´æ˜ï¼š
- **ç±»å‹**ï¼šfeat, fix, docs, style, refactor, perf, testç­‰
- **ä½œç”¨åŸŸ**ï¼šå¯é€‰ï¼Œç”¨äºæŒ‡å®šä¿®æ”¹çš„æ¨¡å—
- **æè¿°**ï¼šç®€æ˜æ‰¼è¦åœ°æè¿°ä¿®æ”¹å†…å®¹

**Section sources**
- [README.md](file://README.md#L1018-L1167)

## æ·»åŠ æ–°åŠŸèƒ½æ•™ç¨‹

### æ·»åŠ æ–°APIç«¯ç‚¹

#### 1. åˆ›å»ºæ–°çš„ç«¯ç‚¹æ–‡ä»¶

åœ¨`app/api/v1/endpoints/`ç›®å½•ä¸‹åˆ›å»ºæ–°çš„ç«¯ç‚¹æ–‡ä»¶ï¼š

```python
# app/api/v1/endpoints/new_feature.py
from fastapi import APIRouter, Depends, HTTPException
from sqlalchemy.orm import Session
from app.core.exceptions import create_success_response
from app.api.deps import get_db

router = APIRouter()

@router.get("/new-feature")
def get_new_feature(
    db: Session = Depends(get_db),
    skip: int = 0,
    limit: int = 100
):
    """è·å–æ–°åŠŸèƒ½æ•°æ®
    
    Args:
        db: æ•°æ®åº“ä¼šè¯
        skip: è·³è¿‡çš„è®°å½•æ•°
        limit: è¿”å›çš„è®°å½•æ•°é™åˆ¶
        
    Returns:
        dict: åŒ…å«æˆåŠŸå“åº”çš„æ•°æ®
    """
    try:
        # ä¸šåŠ¡é€»è¾‘å¤„ç†
        data = []
        return create_success_response(data=data)
    except Exception as e:
        raise HTTPException(status_code=500, detail=str(e))
```

#### 2. æ³¨å†ŒAPIè·¯ç”±

åœ¨`app/api/v1/api.py`ä¸­æ³¨å†Œæ–°çš„è·¯ç”±ï¼š

```python
from fastapi import APIRouter
from app.api.v1.endpoints import (
    kline,
    chan_analysis,
    new_feature  # å¯¼å…¥æ–°ç«¯ç‚¹
)

api_router = APIRouter()
api_router.include_router(kline.router, prefix="/kline", tags=["kline"])
api_router.include_router(chan_analysis.router, prefix="/chan", tags=["chan"])
api_router.include_router(new_feature.router, prefix="/new-feature", tags=["new-feature"])  # æ³¨å†Œæ–°è·¯ç”±
```

#### 3. æ·»åŠ è¯·æ±‚å‚æ•°éªŒè¯

ä½¿ç”¨Pydanticæ¨¡å‹è¿›è¡Œè¯·æ±‚å‚æ•°éªŒè¯ï¼š

```python
# app/schemas/new_feature.py
from pydantic import BaseModel
from typing import Optional

class NewFeatureRequest(BaseModel):
    """æ–°åŠŸèƒ½è¯·æ±‚å‚æ•°"""
    category: Optional[str] = None
    status: Optional[str] = None
    page: int = 1
    page_size: int = 20

class NewFeatureResponse(BaseModel):
    """æ–°åŠŸèƒ½å“åº”æ•°æ®"""
    id: int
    name: str
    value: float
    created_at: str
```

#### 4. å®ç°ä¸šåŠ¡é€»è¾‘

åœ¨`app/services/`ç›®å½•ä¸‹å®ç°ä¸šåŠ¡é€»è¾‘ï¼š

```python
# app/services/new_feature.py
from typing import List, Dict
from sqlalchemy.orm import Session

class NewFeatureService:
    """æ–°åŠŸèƒ½æœåŠ¡ç±»"""
    
    def __init__(self):
        pass
        
    def get_features(self, db: Session, category: str = None) -> List[Dict]:
        """è·å–åŠŸèƒ½åˆ—è¡¨
        
        Args:
            db: æ•°æ®åº“ä¼šè¯
            category: åŠŸèƒ½ç±»åˆ«
            
        Returns:
            åŠŸèƒ½åˆ—è¡¨
        """
        # å®ç°ä¸šåŠ¡é€»è¾‘
        pass
        
    def create_feature(self, db: Session, data: dict) -> Dict:
        """åˆ›å»ºæ–°åŠŸèƒ½
        
        Args:
            db: æ•°æ®åº“ä¼šè¯
            data: åŠŸèƒ½æ•°æ®
            
        Returns:
            åˆ›å»ºçš„åŠŸèƒ½æ•°æ®
        """
        # å®ç°åˆ›å»ºé€»è¾‘
        pass

# åˆ›å»ºå…¨å±€å®ä¾‹
new_feature_service = NewFeatureService()
```

### æ·»åŠ æ–°æ•°æ®æ¨¡å‹

#### 1. åˆ›å»ºæ–°çš„æ•°æ®æ¨¡å‹

åœ¨`app/models/`ç›®å½•ä¸‹åˆ›å»ºæ–°çš„æ•°æ®æ¨¡å‹ï¼š

```python
# app/models/new_model.py
from sqlalchemy import Column, Integer, String, DateTime, Text, Boolean
from sqlalchemy.sql import func
from app.db.base_class import Base

class NewModel(Base):
    """æ–°åŠŸèƒ½æ•°æ®æ¨¡å‹"""
    __tablename__ = "new_table"
    
    id = Column(Integer, primary_key=True, index=True, comment="ä¸»é”®ID")
    name = Column(String(100), nullable=False, index=True, comment="åç§°")
    description = Column(Text, nullable=True, comment="æè¿°")
    status = Column(String(20), default="active", comment="çŠ¶æ€")
    is_active = Column(Boolean, default=True, comment="æ˜¯å¦æ¿€æ´»")
    created_at = Column(DateTime, server_default=func.now(), comment="åˆ›å»ºæ—¶é—´")
    updated_at = Column(DateTime, server_default=func.now(), onupdate=func.now(), comment="æ›´æ–°æ—¶é—´")
```

#### 2. åˆ›å»ºCRUDæ“ä½œ

åœ¨`app/crud/`ç›®å½•ä¸‹åˆ›å»ºCRUDæ“ä½œï¼š

```python
# app/crud/new_model.py
from typing import List, Optional
from sqlalchemy.orm import Session
from app.models.new_model import NewModel
from app.schemas.new_model import NewModelCreate, NewModelUpdate

class CRUDNewModel:
    """æ–°æ¨¡å‹CRUDæ“ä½œ"""
    
    def get(self, db: Session, id: int) -> Optional[NewModel]:
        """æ ¹æ®IDè·å–è®°å½•"""
        return db.query(NewModel).filter(NewModel.id == id).first()
        
    def get_multi(
        self, db: Session, *, skip: int = 0, limit: int = 100
    ) -> List[NewModel]:
        """è·å–å¤šæ¡è®°å½•"""
        return db.query(NewModel).offset(skip).limit(limit).all()
        
    def create(self, db: Session, *, obj_in: NewModelCreate) -> NewModel:
        """åˆ›å»ºæ–°è®°å½•"""
        db_obj = NewModel(**obj_in.dict())
        db.add(db_obj)
        db.commit()
        db.refresh(db_obj)
        return db_obj
        
    def update(
        self, db: Session, *, db_obj: NewModel, obj_in: NewModelUpdate
    ) -> NewModel:
        """æ›´æ–°è®°å½•"""
        update_data = obj_in.dict(exclude_unset=True)
        for field, value in update_data.items():
            setattr(db_obj, field, value)
        db.add(db_obj)
        db.commit()
        db.refresh(db_obj)
        return db_obj
        
    def remove(self, db: Session, *, id: int) -> NewModel:
        """åˆ é™¤è®°å½•"""
        obj = db.query(NewModel).get(id)
        db.delete(obj)
        db.commit()
        return obj

# åˆ›å»ºå…¨å±€å®ä¾‹
new_model = CRUDNewModel()
```

#### 3. åˆ›å»ºPydanticæ¨¡å‹

åœ¨`app/schemas/`ç›®å½•ä¸‹åˆ›å»ºPydanticæ¨¡å‹ï¼š

```python
# app/schemas/new_model.py
from pydantic import BaseModel
from datetime import datetime
from typing import Optional

class NewModelBase(BaseModel):
    """æ–°æ¨¡å‹åŸºç¡€æ¨¡å‹"""
    name: str
    description: Optional[str] = None
    status: Optional[str] = "active"

class NewModelCreate(NewModelBase):
    """åˆ›å»ºæ–°æ¨¡å‹"""
    pass

class NewModelUpdate(NewModelBase):
    """æ›´æ–°æ–°æ¨¡å‹"""
    name: Optional[str] = None

class NewModel(NewModelBase):
    """æ–°æ¨¡å‹å“åº”æ¨¡å‹"""
    id: int
    is_active: bool
    created_at: datetime
    updated_at: datetime

    class Config:
        from_attributes = True
```

### æ·»åŠ æ–°å‰ç«¯ç»„ä»¶

#### 1. åˆ›å»ºæ–°çš„Svelteç»„ä»¶

åœ¨`frontend/src/lib/components/`ç›®å½•ä¸‹åˆ›å»ºæ–°çš„ç»„ä»¶ï¼š

```svelte
<!-- src/lib/components/NewFeatureComponent.svelte -->
<script>
    import { onMount } from 'svelte';
    import { klineStore } from '$lib/stores.js';
    import { getNewFeatureData } from '$lib/api.js';
    
    // å“åº”å¼å˜é‡
    let isLoading = false;
    let error = null;
    let data = [];
    let selectedCategory = 'all';
    
    // ç”Ÿå‘½å‘¨æœŸé’©å­
    onMount(async () => {
        await loadData();
    });
    
    // åŠ è½½æ•°æ®
    async function loadData() {
        isLoading = true;
        error = null;
        try {
            const response = await getNewFeatureData(selectedCategory);
            data = response.data;
        } catch (err) {
            error = err.message;
        } finally {
            isLoading = false;
        }
    }
    
    // å¤„ç†ç±»åˆ«å˜åŒ–
    function handleCategoryChange(category) {
        selectedCategory = category;
        loadData();
    }
</script>

<div class="p-4">
    <!-- åŠ è½½çŠ¶æ€ -->
    {#if isLoading}
        <div class="flex items-center justify-center py-8">
            <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-chan-600"></div>
        </div>
    {:else if error}
        <!-- é”™è¯¯çŠ¶æ€ -->
        <div class="bg-red-50 border border-red-200 rounded-lg p-4">
            <p class="text-red-700">åŠ è½½å¤±è´¥: {error}</p>
            <button 
                on:click={loadData}
                class="mt-2 text-sm bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700"
            >
                é‡è¯•
            </button>
        </div>
    {:else}
        <!-- æ•°æ®å±•ç¤º -->
        <div class="space-y-4">
            <!-- æ§åˆ¶é¢æ¿ -->
            <div class="flex space-x-2">
                {#each ['all', 'category1', 'category2'] as category}
                    <button 
                        class="px-3 py-1 rounded text-sm transition-colors {
                            selectedCategory === category 
                                ? 'bg-chan-600 text-white' 
                                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                        }"
                        on:click={() => handleCategoryChange(category)}
                    >
                        {category}
                    </button>
                {/each}
            </div>
            
            <!-- æ•°æ®åˆ—è¡¨ -->
            <div class="grid gap-4">
                {#each data as item}
                    <div class="border border-gray-200 rounded-lg p-4">
                        <h3 class="font-medium text-gray-900">{item.name}</h3>
                        <p class="text-sm text-gray-600 mt-1">{item.description}</p>
                        <div class="flex justify-between items-center mt-2">
                            <span class="text-sm text-gray-500">çŠ¶æ€: {item.status}</span>
                            <span class="text-sm text-gray-500">åˆ›å»ºæ—¶é—´: {item.created_at}</span>
                        </div>
                    </div>
                {/each}
            </div>
        </div>
    {/if}
</div>

<style>
    .new-feature-component {
        @apply bg-white rounded-lg shadow-sm;
    }
</style>
```

#### 2. åˆ›å»ºAPIæ¥å£

åœ¨`frontend/src/lib/api.js`ä¸­æ·»åŠ æ–°çš„APIæ¥å£ï¼š

```javascript
// æ–°åŠŸèƒ½ç›¸å…³API
export async function getNewFeatureData(category = 'all') {
    return await get('/new-feature', {
        category
    });
}

export async function createNewFeature(data) {
    return await post('/new-feature', data);
}

export async function updateNewFeature(id, data) {
    return await put(`/new-feature/${id}`, data);
}

export async function deleteNewFeature(id) {
    return await del(`/new-feature/${id}`);
}
```

#### 3. åˆ›å»ºçŠ¶æ€ç®¡ç†

åœ¨`frontend/src/lib/stores.js`ä¸­åˆ›å»ºçŠ¶æ€ç®¡ç†ï¼š

```javascript
import { writable } from 'svelte/store';

// æ–°åŠŸèƒ½æ•°æ®å­˜å‚¨
export const newFeatureStore = writable([]);

// æ–°åŠŸèƒ½åŠ è½½çŠ¶æ€
export const newFeatureLoading = writable(false);

// æ–°åŠŸèƒ½é”™è¯¯ä¿¡æ¯
export const newFeatureError = writable(null);

// æ–°åŠŸèƒ½ç­›é€‰æ¡ä»¶
export const newFeatureFilters = writable({
    category: 'all',
    status: 'active',
    page: 1,
    pageSize: 10
});
```

#### 4. åœ¨é¡µé¢ä¸­ä½¿ç”¨ç»„ä»¶

åœ¨ç›¸åº”çš„é¡µé¢ä¸­å¯¼å…¥å’Œä½¿ç”¨æ–°ç»„ä»¶ï¼š

```svelte
<!-- src/routes/new-feature/+page.svelte -->
<script>
    import NewFeatureComponent from '$components/NewFeatureComponent.svelte';
</script>

<div class="container mx-auto px-4 py-8">
    <h1 class="text-2xl font-bold mb-6">æ–°åŠŸèƒ½ç®¡ç†</h1>
    <NewFeatureComponent />
</div>
```

**Section sources**
- [README.md](file://README.md#L1168-L1317)
- [app/api/v1/endpoints/kline.py](file://app/api/v1/endpoints/kline.py#L1-L195)
- [app/models/kline.py](file://app/models/kline.py#L1-L37)
- [app/schemas/kline.py](file://app/schemas/kline.py#L1-L30)
- [app/crud/kline.py](file://app/crud/kline.py#L1-L355)
- [app/services/kline_aggregator.py](file://app/services/kline_aggregator.py#L1-L251)
- [frontend/src/lib/api.js](file://frontend/src/lib/api.js#L1-L554)
- [frontend/src/lib/components/KLineChart.svelte](file://frontend/src/lib/components/KLineChart.svelte#L1-L626)

## æµ‹è¯•æŒ‡å—

### å•å…ƒæµ‹è¯•

ç³»ç»Ÿä½¿ç”¨Pythonçš„unittestæ¡†æ¶è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚æ‰€æœ‰å•å…ƒæµ‹è¯•æ–‡ä»¶åº”ä»¥`test_`å¼€å¤´ï¼Œå¹¶æ”¾ç½®åœ¨ç›¸åº”çš„æ¨¡å—ç›®å½•ä¸­ã€‚

#### 1. åˆ›å»ºå•å…ƒæµ‹è¯•

åœ¨ç›¸åº”æ¨¡å—ç›®å½•ä¸‹åˆ›å»ºæµ‹è¯•æ–‡ä»¶ï¼š

```python
# app/crud/test_kline.py
import unittest
from unittest.mock import Mock, patch
from sqlalchemy.orm import Session
from app.crud.kline import kline
from app.models.kline import BtcUsdtKline
from app.schemas.kline import BtcUsdtKlineCreate

class TestKlineCRUD(unittest.TestCase):
    """Kçº¿CRUDæ“ä½œæµ‹è¯•"""
    
    def setUp(self):
        """æµ‹è¯•å‰å‡†å¤‡"""
        self.db = Mock(spec=Session)
        self.kline_data = BtcUsdtKlineCreate(
            timestamp=1640995200000,
            open_time="2022-01-01T00:00:00",
            close_time="2022-01-01T00:01:00",
            open_price="50000.0",
            high_price="51000.0",
            low_price="49000.0",
            close_price="50500.0",
            volume="100.0",
            quote_volume="5000000.0",
            trades_count=100,
            taker_buy_volume="60.0",
            taker_buy_quote_volume="3000000.0"
        )
    
    @patch('app.crud.kline.BtcUsdtKline')
    def test_create_kline(self, mock_model):
        """æµ‹è¯•åˆ›å»ºKçº¿æ•°æ®"""
        # å‡†å¤‡æµ‹è¯•æ•°æ®
        mock_db_obj = Mock()
        self.db.add.return_value = None
        self.db.commit.return_value = None
        self.db.refresh.return_value = None
        
        # æ‰§è¡Œæµ‹è¯•
        result = kline.create(db=self.db, obj_in=self.kline_data)
        
        # éªŒè¯ç»“æœ
        self.db.add.assert_called_once()
        self.db.commit.assert_called_once()
        self.db.refresh.assert_called_once()
        self.assertIsNotNone(result)
    
    def test_get_kline_by_id(self):
        """æµ‹è¯•æ ¹æ®IDè·å–Kçº¿æ•°æ®"""
        # å‡†å¤‡æµ‹è¯•æ•°æ®
        mock_kline = Mock(spec=BtcUsdtKline)
        self.db.query.return_value.filter.return_value.first.return_value = mock_kline
        
        # æ‰§è¡Œæµ‹è¯•
        result = kline.get(db=self.db, symbol="btc_usdt", id=1)
        
        # éªŒè¯ç»“æœ
        self.db.query.assert_called_once()
        self.assertIsNotNone(result)
    
    def test_get_by_timestamp(self):
        """æµ‹è¯•æ ¹æ®æ—¶é—´æˆ³è·å–Kçº¿æ•°æ®"""
        # å‡†å¤‡æµ‹è¯•æ•°æ®
        mock_kline = Mock(spec=BtcUsdtKline)
        self.db.query.return_value.filter.return_value.first.return_value = mock_kline
        
        # æ‰§è¡Œæµ‹è¯•
        result = kline.get_by_timestamp(db=self.db, symbol="btc_usdt", timestamp=1640995200000)
        
        # éªŒè¯ç»“æœ
        self.db.query.assert_called_once()
        self.assertIsNotNone(result)

if __name__ == '__main__':
    unittest.main()
```

#### 2. è¿è¡Œå•å…ƒæµ‹è¯•

è¿è¡Œæ‰€æœ‰å•å…ƒæµ‹è¯•ï¼š

```bash
python -m unittest discover -v
```

è¿è¡Œç‰¹å®šæ¨¡å—çš„æµ‹è¯•ï¼š

```bash
python -m unittest app.crud.test_kline -v
```

### é›†æˆæµ‹è¯•

ç³»ç»Ÿæä¾›`test_chan_integration.py`ä½œä¸ºé›†æˆæµ‹è¯•è„šæœ¬ï¼Œç”¨äºéªŒè¯æ‰€æœ‰ç»„ä»¶æ˜¯å¦æ­£ç¡®é›†æˆå’Œå·¥ä½œã€‚

#### 1. é›†æˆæµ‹è¯•å†…å®¹

é›†æˆæµ‹è¯•åŒ…å«ä»¥ä¸‹æµ‹è¯•é¡¹ï¼š

- Chanæ¨¡å—å¯¼å…¥æµ‹è¯•
- æ•°æ®åº“è¿æ¥æµ‹è¯•
- Chané€‚é…å™¨æµ‹è¯•
- Kçº¿èšåˆå™¨æµ‹è¯•
- ç¼ è®ºåˆ†æåŠŸèƒ½æµ‹è¯•
- æ•°æ®è·å–å™¨æµ‹è¯•
- APIç«¯ç‚¹æµ‹è¯•

#### 2. è¿è¡Œé›†æˆæµ‹è¯•

```bash
python test_chan_integration.py
```

#### 3. è‡ªå®šä¹‰é›†æˆæµ‹è¯•

å¯ä»¥åˆ›å»ºæ–°çš„é›†æˆæµ‹è¯•æ–‡ä»¶ï¼š

```python
# test_new_feature_integration.py
import sys
import os
from pathlib import Path
import requests
import time
from datetime import datetime

project_root = Path(__file__).parent
sys.path.insert(0, str(project_root))

def test_new_feature_api():
    """æµ‹è¯•æ–°åŠŸèƒ½APIç«¯ç‚¹"""
    print("ğŸ” æµ‹è¯•æ–°åŠŸèƒ½APIç«¯ç‚¹...")
    
    try:
        base_url = "http://localhost:8000"
        
        # æµ‹è¯•è·å–æ•°æ®
        response = requests.get(f"{base_url}/api/v1/new-feature", timeout=5)
        if response.status_code == 200:
            print("âœ… æ–°åŠŸèƒ½APIç«¯ç‚¹æ­£å¸¸")
            return True, "æ–°åŠŸèƒ½APIå·¥ä½œæ­£å¸¸"
        else:
            print(f"âŒ æ–°åŠŸèƒ½APIè¿”å›çŠ¶æ€ç : {response.status_code}")
            return False, f"æ–°åŠŸèƒ½APIå¼‚å¸¸ ({response.status_code})"
            
    except Exception as e:
        print(f"âŒ æ–°åŠŸèƒ½APIæµ‹è¯•å¤±è´¥: {e}")
        return False, f"æ–°åŠŸèƒ½APIæµ‹è¯•å¤±è´¥"

def run_integration_test():
    """è¿è¡Œå®Œæ•´çš„é›†æˆæµ‹è¯•"""
    print("ğŸ¢ ç¼ è®ºåˆ†æç³»ç»Ÿ - æ–°åŠŸèƒ½é›†æˆæµ‹è¯•")
    print("=" * 50)
    
    tests = [
        ("æ–°åŠŸèƒ½APIç«¯ç‚¹", test_new_feature_api),
    ]
    
    results = {}
    
    for test_name, test_func in tests:
        try:
            success, message = test_func()
            results[test_name] = {"success": success, "message": message}
        except Exception as e:
            print(f"âŒ {test_name}æµ‹è¯•å¼‚å¸¸: {e}")
            results[test_name] = {"success": False, "message": f"æµ‹è¯•å¼‚å¸¸: {str(e)}"}
    
    # æ€»ç»“æŠ¥å‘Š
    print("\n" + "=" * 50)
    print("ğŸ“‹ é›†æˆæµ‹è¯•æŠ¥å‘Š:")
    
    passed = 0
    total = len(tests)
    
    for test_name, result in results.items():
        status = "âœ… é€šè¿‡" if result["success"] else "âŒ å¤±è´¥"
        print(f"   {test_name:15} : {status}")
        print(f"   {' ' * 15}   {result['message']}")
        
        if result["success"]:
            passed += 1
    
    print(f"\nğŸ“Š æµ‹è¯•ç»“æœ: {passed}/{total} é€šè¿‡")
    
    return passed == total, results

if __name__ == "__main__":
    success, results = run_integration_test()
    sys.exit(0 if success else 1)
```

### å‰ç«¯æµ‹è¯•

å‰ç«¯ä½¿ç”¨Svelte Testing Libraryè¿›è¡Œç»„ä»¶æµ‹è¯•ã€‚

#### 1. åˆ›å»ºç»„ä»¶æµ‹è¯•

```javascript
// frontend/src/lib/components/__tests__/NewFeatureComponent.test.js
import { render, screen, fireEvent } from '@testing-library/svelte';
import NewFeatureComponent from '../NewFeatureComponent.svelte';
import { klineStore } from '$lib/stores.js';
import { getNewFeatureData } from '$lib/api.js';

// æ¨¡æ‹ŸAPIè°ƒç”¨
jest.mock('$lib/api.js', () => ({
    getNewFeatureData: jest.fn()
}));

describe('NewFeatureComponent', () => {
    beforeEach(() => {
        jest.clearAllMocks();
    });
    
    test('æ˜¾ç¤ºåŠ è½½çŠ¶æ€', async () => {
        getNewFeatureData.mockResolvedValue({ data: [] });
        
        render(NewFeatureComponent);
        
        expect(screen.getByText('åŠ è½½å›¾è¡¨ä¸­...')).toBeInTheDocument();
    });
    
    test('æ˜¾ç¤ºæ•°æ®åˆ—è¡¨', async () => {
        const mockData = [
            { id: 1, name: 'Feature 1', description: 'Description 1' },
            { id: 2, name: 'Feature 2', description: 'Description 2' }
        ];
        
        getNewFeatureData.mockResolvedValue({ data: mockData });
        
        render(NewFeatureComponent);
        
        // ç­‰å¾…æ•°æ®åŠ è½½
        await screen.findByText('Feature 1');
        
        expect(screen.getByText('Feature 1')).toBeInTheDocument();
        expect(screen.getByText('Feature 2')).toBeInTheDocument();
    });
    
    test('å¤„ç†ç±»åˆ«åˆ‡æ¢', async () => {
        const mockData = [{ id: 1, name: 'Feature 1' }];
        
        getNewFeatureData.mockResolvedValue({ data: mockData });
        
        render(NewFeatureComponent);
        
        // ç­‰å¾…æ•°æ®åŠ è½½
        await screen.findByText('Feature 1');
        
        // ç‚¹å‡»ç±»åˆ«æŒ‰é’®
        const categoryButton = screen.getByText('category1');
        fireEvent.click(categoryButton);
        
        expect(getNewFeatureData).toHaveBeenCalledWith('category1');
    });
});
```

#### 2. è¿è¡Œå‰ç«¯æµ‹è¯•

```bash
cd frontend
npm run test
```

### æµ‹è¯•è¦†ç›–ç‡

ä½¿ç”¨coverage.pyå·¥å…·æ£€æŸ¥æµ‹è¯•è¦†ç›–ç‡ï¼š

```bash
# å®‰è£…coverage
pip install coverage

# è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
coverage run -m unittest discover
coverage report
coverage html
```

**Section sources**
- [test_chan_integration.py](file://test_chan_integration.py#L1-L401)

## å·¥å…·é“¾ä¸è‡ªåŠ¨åŒ–

### é¡¹ç›®ä¾èµ–ç®¡ç†

#### 1. Pythonä¾èµ–

é¡¹ç›®ä½¿ç”¨`requirements.txt`ç®¡ç†Pythonä¾èµ–ï¼š

```txt
fastapi>=0.68.0
uvicorn>=0.15.0
sqlalchemy>=1.4.23
pydantic>=2.0.0
pydantic-settings>=2.0.0
python-dotenv>=0.19.0
psycopg2-binary>=2.9.1
alembic>=1.7.1
python-jose[cryptography]>=3.3.0
passlib[bcrypt]>=1.7.4
websockets>=10.0
python-multipart>=0.0.5
aiohttp>=3.8.1
typer>=0.9.0
ccxt>=4.0.0
pandas>=2.0.0
certifi>=2024.2.0
```

#### 2. å‰ç«¯ä¾èµ–

é¡¹ç›®ä½¿ç”¨`package.json`ç®¡ç†å‰ç«¯ä¾èµ–ï¼š

```json
{
  "name": "chan-analysis-frontend",
  "version": "1.0.0",
  "description": "ç¼ è®ºåˆ†æç³»ç»Ÿå‰ç«¯ - Svelte + KLineChartsä¸“ä¸šç•Œé¢",
  "type": "module",
  "scripts": {
    "dev": "vite dev --port 3000",
    "build": "vite build",
    "preview": "vite preview",
    "check": "svelte-kit sync && svelte-check --tsconfig ./tsconfig.json",
    "check:watch": "svelte-kit sync && svelte-check --tsconfig ./tsconfig.json --watch",
    "lint": "prettier --plugin-search-dir . --check . && eslint .",
    "format": "prettier --plugin-search-dir . --write ."
  },
  "devDependencies": {
    "@sveltejs/adapter-auto": "^2.1.1",
    "@sveltejs/adapter-static": "^2.0.3",
    "@sveltejs/kit": "^1.27.4",
    "svelte": "^4.2.7",
    "svelte-check": "^3.6.0",
    "typescript": "^5.0.0",
    "vite": "^4.4.2",
    "autoprefixer": "^10.4.16",
    "postcss": "^8.4.31",
    "tailwindcss": "^3.3.0",
    "@tailwindcss/forms": "^0.5.6",
    "@tailwindcss/typography": "^0.5.10"
  },
  "dependencies": {
    "klinecharts": "^9.8.12",
    "lucide-svelte": "^0.294.0",
    "clsx": "^2.0.0",
    "tailwind-merge": "^2.0.0"
  },
  "engines": {
    "node": ">=16.0.0"
  }
}
```

### ä»£ç æ ¼å¼åŒ–ä¸æ£€æŸ¥

#### 1. Svelteé…ç½®

`frontend/svelte.config.js`é…ç½®äº†é¡¹ç›®çš„åŸºæœ¬è®¾ç½®ï¼š

```javascript
import adapter from '@sveltejs/adapter-auto';
import { vitePreprocess } from '@sveltejs/kit/vite';

const config = {
  preprocess: vitePreprocess(),
  kit: {
    adapter: adapter(),
    alias: {
      '$components': 'src/lib/components',
      '$stores': 'src/lib/stores.js',
      '$utils': 'src/lib/utils.js',
      '$api': 'src/lib/api.js'
    },
    prerender: {
      handleHttpError: 'warn'
    },
    csp: {
      mode: 'auto',
      directives: {
        'script-src': ['self', 'unsafe-inline']
      }
    }
  }
};

export default config;
```

#### 2. ä»£ç æ ¼å¼åŒ–

ä½¿ç”¨Prettierè¿›è¡Œä»£ç æ ¼å¼åŒ–ï¼š

```bash
# æ ¼å¼åŒ–æ‰€æœ‰æ–‡ä»¶
npm run format

# æ£€æŸ¥æ ¼å¼
npm run lint
```

#### 3. ç±»å‹æ£€æŸ¥

ä½¿ç”¨Svelte Checkè¿›è¡Œç±»å‹æ£€æŸ¥ï¼š

```bash
npm run check
```

### æ„å»ºä¸éƒ¨ç½²

#### 1. å‰ç«¯æ„å»º

```bash
# å¼€å‘æ¨¡å¼
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# é¢„è§ˆç”Ÿäº§ç‰ˆæœ¬
npm run preview
```

#### 2. åç«¯éƒ¨ç½²

ä½¿ç”¨Uvicornéƒ¨ç½²åç«¯æœåŠ¡ï¼š

```bash
# å¼€å‘æ¨¡å¼
uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload

# ç”Ÿäº§æ¨¡å¼
uvicorn app.main:app --host 0.0.0.0 --port 8000 --workers 4
```

#### 3. Dockeréƒ¨ç½²

å¯ä»¥åˆ›å»ºDockerfileè¿›è¡Œå®¹å™¨åŒ–éƒ¨ç½²ï¼š

```dockerfile
# Dockerfile
FROM python:3.11-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .

EXPOSE 8000

CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "8000"]
```

**Section sources**
- [requirements.txt](file://requirements.txt#L1-L18)
- [frontend/package.json](file://frontend/package.json#L1-L53)
- [frontend/svelte.config.js](file://frontend/svelte.config.js#L1-L39)

## Pull Requestå®¡æŸ¥æµç¨‹

### Pull Requestæ ‡å‡†

æ‰€æœ‰Pull Requestå¿…é¡»æ»¡è¶³ä»¥ä¸‹æ ‡å‡†ï¼š

1. **ä»£ç è´¨é‡**ï¼š
   - ä»£ç éµå¾ªé¡¹ç›®ä»£ç è§„èŒƒ
   - æœ‰é€‚å½“çš„æ³¨é‡Šå’Œæ–‡æ¡£
   - æ— æ˜æ˜¾çš„æ€§èƒ½é—®é¢˜
   - æ— å®‰å…¨æ¼æ´

2. **æµ‹è¯•è¦†ç›–ç‡**ï¼š
   - åŒ…å«ç›¸åº”çš„å•å…ƒæµ‹è¯•
   - æµ‹è¯•è¦†ç›–ä¸»è¦åŠŸèƒ½è·¯å¾„
   - é€šè¿‡æ‰€æœ‰æµ‹è¯•

3. **æ–‡æ¡£å®Œæ•´æ€§**ï¼š
   - æ›´æ–°ç›¸å…³æ–‡æ¡£
   - æ·»åŠ å¿…è¦çš„APIæ–‡æ¡£
   - æ›´æ–°READMEï¼ˆå¦‚éœ€è¦ï¼‰

4. **åŠŸèƒ½æ­£ç¡®æ€§**ï¼š
   - å®ç°é¢„æœŸåŠŸèƒ½
   - æ— æ˜æ˜¾Bug
   - ç”¨æˆ·ä½“éªŒè‰¯å¥½

### Pull Requestå®¡æŸ¥æµç¨‹

#### 1. åˆ›å»ºPull Request

```bash
# 1. Forkå¹¶å…‹éš†é¡¹ç›®
git clone https://github.com/your-username/turtle.git
cd turtle

# 2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/new-feature

# 3. å¼€å‘å’Œæµ‹è¯•
# è¿›è¡Œå¼€å‘...
python test_chan_integration.py

# 4. æäº¤æ›´æ”¹
git add .
git commit -m "feat: æ·»åŠ æ–°åŠŸèƒ½"
git push origin feature/new-feature

# 5. åˆ›å»ºPull Request
# åœ¨GitHubä¸Šåˆ›å»ºPR
```

#### 2. å®¡æŸ¥æ£€æŸ¥æ¸…å•

å®¡æŸ¥è€…å°†æ ¹æ®ä»¥ä¸‹æ¸…å•è¿›è¡Œå®¡æŸ¥ï¼š

- [ ] ä»£ç æ˜¯å¦éµå¾ªPEP 8å’ŒSvelteé£æ ¼è§„èŒƒ
- [ ] æ˜¯å¦æœ‰é€‚å½“çš„ç±»å‹æç¤ºå’Œæ–‡æ¡£å­—ç¬¦ä¸²
- [ ] æ˜¯å¦åŒ…å«ç›¸åº”çš„æµ‹è¯•ç”¨ä¾‹
- [ ] æµ‹è¯•æ˜¯å¦é€šè¿‡
- [ ] æ˜¯å¦æ›´æ–°äº†ç›¸å…³æ–‡æ¡£
- [ ] ä»£ç æ˜¯å¦æœ‰é‡å¤æˆ–å¯ä»¥é‡æ„çš„éƒ¨åˆ†
- [ ] æ˜¯å¦æœ‰æ½œåœ¨çš„æ€§èƒ½é—®é¢˜
- [ ] æ˜¯å¦æœ‰å®‰å…¨æ¼æ´
- [ ] åŠŸèƒ½æ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œ
- [ ] ç”¨æˆ·ä½“éªŒæ˜¯å¦è‰¯å¥½

#### 3. å®¡æŸ¥åé¦ˆ

å®¡æŸ¥è€…å°†æä¾›å…·ä½“çš„åé¦ˆï¼ŒåŒ…æ‹¬ï¼š

- ä»£ç æ”¹è¿›å»ºè®®
- æµ‹è¯•è¡¥å……å»ºè®®
- æ–‡æ¡£æ›´æ–°å»ºè®®
- æ½œåœ¨é—®é¢˜æé†’

#### 4. ä¿®è®¢ä¸åˆå¹¶

è´¡çŒ®è€…æ ¹æ®åé¦ˆè¿›è¡Œä¿®è®¢ï¼š

```bash
# 1. ä¿®æ”¹ä»£ç 
# è¿›è¡Œä¿®æ”¹...

# 2. æ·»åŠ æµ‹è¯•
# æ·»åŠ æµ‹è¯•...

# 3. æäº¤ä¿®è®¢
git add .
git commit -m "fix: ä¿®å¤å®¡æŸ¥åé¦ˆçš„é—®é¢˜"
git push origin feature/new-feature
```

å½“æ‰€æœ‰å®¡æŸ¥æ„è§éƒ½å¾—åˆ°å¦¥å–„å¤„ç†åï¼ŒPull Requestå°†è¢«åˆå¹¶ã€‚

### è´¡çŒ®æµç¨‹æ€»ç»“

1. **æŠ¥å‘Šé—®é¢˜**ï¼šåœ¨GitHub Issuesä¸­æäº¤bugæŠ¥å‘Šæˆ–åŠŸèƒ½å»ºè®®
2. **ä»£ç è´¡çŒ®**ï¼šForké¡¹ç›®ï¼Œåˆ›å»ºåŠŸèƒ½åˆ†æ”¯ï¼Œæäº¤Pull Request
3. **æ–‡æ¡£æ”¹è¿›**ï¼šæ”¹è¿›æ–‡æ¡£ã€æ·»åŠ ç¤ºä¾‹ã€ç¿»è¯‘å†…å®¹
4. **æµ‹è¯•åé¦ˆ**ï¼šæµ‹è¯•æ–°åŠŸèƒ½ï¼Œæä¾›ä½¿ç”¨åé¦ˆ

æˆ‘ä»¬é¼“åŠ±é«˜è´¨é‡çš„ä»£ç è´¡çŒ®ï¼Œç¡®ä¿é¡¹ç›®çš„é•¿æœŸå¥åº·å‘å±•ã€‚

**Section sources**
- [README.md](file://README.md#L1318-L1467)

## é™„å½•

### é¡¹ç›®ç»“æ„è¯´æ˜

```
turtle/
â”œâ”€â”€ ğŸ åç«¯ (Python/FastAPI)
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/v1/          # APIè·¯ç”±å’Œç«¯ç‚¹
â”‚   â”‚   â”œâ”€â”€ core/            # æ ¸å¿ƒé…ç½®å’Œå¼‚å¸¸å¤„ç†
â”‚   â”‚   â”œâ”€â”€ crud/            # æ•°æ®åº“æ“ä½œ
â”‚   â”‚   â”œâ”€â”€ db/              # æ•°æ®åº“è¿æ¥å’Œä¼šè¯
â”‚   â”‚   â”œâ”€â”€ models/          # SQLAlchemyæ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ schemas/         # Pydanticæ¨¡å¼
â”‚   â”‚   â”œâ”€â”€ scripts/         # æ•°æ®è·å–è„šæœ¬
â”‚   â”‚   â””â”€â”€ services/        # ä¸šåŠ¡é€»è¾‘æœåŠ¡
â”‚   â”œâ”€â”€ chan.py/             # Chanæ¨¡å—å­æ¨¡å—
â”‚   â”œâ”€â”€ logs/                # æ—¥å¿—æ–‡ä»¶
â”‚   â””â”€â”€ static/              # é™æ€æ–‡ä»¶ç›®å½•
â”‚
â”œâ”€â”€ ğŸŒ å‰ç«¯ (Svelte)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”‚   â”œâ”€â”€ components/  # Svelteç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ stores.js    # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ api.js       # APIæ¥å£
â”‚   â”‚   â”‚   â””â”€â”€ utils.js     # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ routes/          # è·¯ç”±é¡µé¢
â”‚   â”œâ”€â”€ static/              # é™æ€èµ„æº
â”‚   â””â”€â”€ dist/                # æ„å»ºè¾“å‡º
â”‚
â””â”€â”€ ğŸ“‹ é…ç½®æ–‡ä»¶
    â”œâ”€â”€ requirements.txt     # Pythonä¾èµ–
    â”œâ”€â”€ .env.example        # ç¯å¢ƒå˜é‡ç¤ºä¾‹
    â”œâ”€â”€ create_tables.py    # æ•°æ®åº“åˆå§‹åŒ–
    â”œâ”€â”€ quick_start.py      # å¿«é€Ÿå¯åŠ¨è„šæœ¬
    â””â”€â”€ test_chan_integration.py  # é›†æˆæµ‹è¯•
```

### å¸¸è§é—®é¢˜è§£å†³

#### 1. æ•°æ®åº“è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥PostgreSQLæœåŠ¡
sudo systemctl status postgresql  # Linux
brew services list | grep postgresql  # macOS

# æ£€æŸ¥è¿æ¥é…ç½®
psql -h localhost -U postgres -d turtle
```

#### 2. Chanæ¨¡å—ä¸å¯ç”¨
```bash
# é‡æ–°åˆå§‹åŒ–å­æ¨¡å—
git submodule update --init --recursive

# æ£€æŸ¥æ¨¡å—çŠ¶æ€
python -c "from app.services.chan_adapter import chan_adapter; print(chan_adapter.get_chan_info())"
```

#### 3. APIè¿æ¥è¶…æ—¶
```bash
# æ£€æŸ¥ç½‘ç»œè¿æ¥
curl -I https://api.binance.com/api/v3/ping

# è°ƒæ•´è¶…æ—¶é…ç½®ï¼ˆ.envæ–‡ä»¶ï¼‰
API_TIMEOUT=60
```

#### 4. å‰ç«¯æ„å»ºå¤±è´¥
```bash
cd frontend

# æ¸…ç†ä¾èµ–
rm -rf node_modules package-lock.json
npm install

# æ£€æŸ¥Node.jsç‰ˆæœ¬
node --version  # éœ€è¦16.0+
```

### æ—¥å¿—è°ƒè¯•

ç³»ç»Ÿæ—¥å¿—å­˜å‚¨åœ¨ `logs/app.log`ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æŸ¥çœ‹ï¼š

```bash
# æŸ¥çœ‹å®æ—¶æ—¥å¿—
tail -f logs/app.log

# æœç´¢é”™è¯¯ä¿¡æ¯
grep -i error logs/app.log

# æŸ¥çœ‹æœ€è¿‘100è¡Œ
tail -n 100 logs/app.log
```

**Section sources**
- [README.md](file://README.md#L1468-L1617)