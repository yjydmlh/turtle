# ç¼ è®ºå¤šçº§åˆ«è”ç«‹åˆ†æè‡ªåŠ¨åŒ–äº¤æ˜“ç­–ç•¥è®¾è®¡æ–¹æ¡ˆ

## ğŸ“‹ ç›®å½•

1. [æ ¸å¿ƒç†å¿µ](#æ ¸å¿ƒç†å¿µ)
2. [ç³»ç»Ÿæ¶æ„](#ç³»ç»Ÿæ¶æ„)
3. [å…³é”®æ¨¡å—](#å…³é”®æ¨¡å—)
4. [å·¥ä½œæµç¨‹](#å·¥ä½œæµç¨‹)
5. [ä»“ä½ç®¡ç†](#ä»“ä½ç®¡ç†)
6. [é£é™©æ§åˆ¶](#é£é™©æ§åˆ¶)
7. [å®æ–½å»ºè®®](#å®æ–½å»ºè®®)
8. [ä»£ç ç¤ºä¾‹](#ä»£ç ç¤ºä¾‹)

---

## ğŸ¯ æ ¸å¿ƒç†å¿µ

### ä»€ä¹ˆæ˜¯å¤šçº§åˆ«è”ç«‹åˆ†æ?

**å¤šçº§åˆ«è”ç«‹åˆ†æ**æ˜¯æŒ‡åŒæ—¶è§‚å¯Ÿå¤šä¸ªæ—¶é—´å‘¨æœŸçš„ç¼ è®ºç»“æ„,å½“ä¸åŒçº§åˆ«å‡ºç°**ç›¸åŒæ–¹å‘**çš„ä¹°å–ç‚¹ä¿¡å·æ—¶,å½¢æˆ"**å…±æŒ¯**",ä»è€Œæé«˜äº¤æ˜“èƒœç‡ã€‚

```
æ ¸å¿ƒå…¬å¼:
ä¿¡å·è´¨é‡ = å•çº§åˆ«ä¿¡å·ç½®ä¿¡åº¦ Ã— å¤šçº§åˆ«å…±æŒ¯å¼ºåº¦
```

### ä¸ºä»€ä¹ˆè¦å¤šçº§åˆ«åˆ†æ?

| å•çº§åˆ«åˆ†æ | å¤šçº§åˆ«è”ç«‹åˆ†æ |
|-----------|--------------|
| èƒœç‡: 50-60% | èƒœç‡: 70-90% |
| å‡ä¿¡å·å¤š | è¿‡æ»¤å‡ä¿¡å· |
| æ­¢æŸé¢‘ç¹ | æ­¢æŸåˆç† |
| ç›ˆäºæ¯”ä¸ç¨³å®š | ç›ˆäºæ¯”å¯æ§ |

### ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µ

#### 1ï¸âƒ£ **æ—¶é—´çª—å£å…±æŒ¯**

ä¸åŒçº§åˆ«çš„ä¿¡å·ä¸è¦æ±‚å®Œå…¨åŒæ—¶å‡ºç°,è€Œæ˜¯åœ¨**å…è®¸çš„æ—¶é—´çª—å£å†…**å…ˆåå‡ºç°å³å¯:

```python
æ—¶é—´çª—å£è§„åˆ™:
- M5çº§åˆ«: ä¿¡å·æœ‰æ•ˆæœŸ15åˆ†é’Ÿ
- M15çº§åˆ«: ä¿¡å·æœ‰æ•ˆæœŸ45åˆ†é’Ÿ  
- M30çº§åˆ«: ä¿¡å·æœ‰æ•ˆæœŸ90åˆ†é’Ÿ
- H1çº§åˆ«: ä¿¡å·æœ‰æ•ˆæœŸ180åˆ†é’Ÿ
```

#### 2ï¸âƒ£ **å…±æŒ¯å¼ºåº¦é‡åŒ–**

å…±æŒ¯ä¸æ˜¯ç®€å•çš„"æœ‰"æˆ–"æ— ",è€Œæ˜¯å¯é‡åŒ–çš„**å¼ºåº¦å€¼**:

```python
strength = (
    level_count_score * 0.30 +      # 30% - å‚ä¸çº§åˆ«æ•°
    signal_quality_score * 0.25 +    # 25% - ä¿¡å·è´¨é‡
    time_freshness_score * 0.20 +    # 20% - æ—¶æ•ˆæ€§
    structure_alignment_score * 0.15 + # 15% - ç»“æ„å¯¹åº”
    macd_consistency_score * 0.10     # 10% - MACDä¸€è‡´æ€§
)

å…±æŒ¯ç­‰çº§:
- A+ : strength >= 0.85 (è¶…å¼ºå…±æŒ¯,èƒœç‡90%+)
- A  : strength >= 0.75 (å¼ºå…±æŒ¯,èƒœç‡80%+)
- B  : strength >= 0.65 (æ ‡å‡†å…±æŒ¯,èƒœç‡70%+)
- C  : strength >= 0.55 (å¼±å…±æŒ¯,èƒœç‡60%+)
- D  : strength < 0.55  (ä¸å»ºè®®äº¤æ˜“)
```

#### 3ï¸âƒ£ **åŠ¨æ€ä»“ä½ç®¡ç†**

æ ¹æ®å…±æŒ¯å¼ºåº¦**åŠ¨æ€è°ƒæ•´**ä»“ä½å¤§å°:

```python
ä»“ä½è®¡ç®—å…¬å¼:
position_lots = (equity Ã— base_risk Ã— position_coefficient) / (stop_loss_$ Ã— 100)

å…¶ä¸­:
position_coefficient = time_level_coef Ã— structure_level_coef Ã— signal_quality_coef

èŒƒå›´é™åˆ¶: [0.5, 2.5]

ç¤ºä¾‹:
- 2çº§åˆ«æ ‡å‡†å…±æŒ¯ â†’ ç³»æ•°1.0 â†’ æ ‡å‡†ä»“ä½
- 4çº§åˆ«å¼ºå…±æŒ¯ â†’ ç³»æ•°2.0 â†’ åŒå€ä»“ä½
- å•çº§åˆ«ä¿¡å· â†’ ç³»æ•°0.5 â†’ åŠä»“è§‚æœ›
```

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ•°æ®å±‚ (Data Layer)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  M5    â”‚  â”‚  M15   â”‚  â”‚  M30   â”‚  â”‚  H1    â”‚  â”‚  H4    â”‚â”‚
â”‚  â”‚ Kçº¿æ•°æ® â”‚  â”‚ Kçº¿æ•°æ® â”‚  â”‚ Kçº¿æ•°æ® â”‚  â”‚ Kçº¿æ•°æ® â”‚  â”‚ Kçº¿æ•°æ® â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   åˆ†æå±‚ (Analysis Layer)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚          Chanåˆ†æå¼•æ“ (chan.py)                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ åˆ†å‹  â”‚â†’â”‚  ç¬”   â”‚â†’â”‚  æ®µ   â”‚â†’â”‚ ä¸­æ¢  â”‚â†’â”‚ä¹°å–ç‚¹ â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                              â”‚
â”‚  å¯¹æ¯ä¸ªçº§åˆ«ç‹¬ç«‹åˆ†æ â†’ ç”Ÿæˆå•çº§åˆ«ä¿¡å·                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  å…±æŒ¯å±‚ (Resonance Layer)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚       MultiLevelResonanceDetector (æ ¸å¿ƒæ¨¡å—)          â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  æ­¥éª¤1: ä¿¡å·æ”¶é›† (æŒ‰æ—¶é—´çª—å£)                          â”‚  â”‚
â”‚  â”‚  æ­¥éª¤2: æ–¹å‘ç­›é€‰ (ä¹°/å–ä¸€è‡´)                           â”‚  â”‚
â”‚  â”‚  æ­¥éª¤3: å¼ºåº¦è®¡ç®— (é‡åŒ–è¯„åˆ†)                            â”‚  â”‚
â”‚  â”‚  æ­¥éª¤4: ç­‰çº§åˆ†ç±» (A+/A/B/C/D)                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  éªŒè¯å±‚ (Validation Layer)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         FiveLayerValidator (äº”é‡éªŒè¯)                  â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  âœ“ ç¬¬ä¸€é‡: æ–¹å‘ä¸€è‡´æ€§éªŒè¯                              â”‚  â”‚
â”‚  â”‚  âœ“ ç¬¬äºŒé‡: ç»“æ„å®Œæ•´æ€§éªŒè¯                              â”‚  â”‚
â”‚  â”‚  âœ“ ç¬¬ä¸‰é‡: æ—¶é—´æœ‰æ•ˆæ€§éªŒè¯                              â”‚  â”‚
â”‚  â”‚  âœ“ ç¬¬å››é‡: é£é™©æ”¶ç›Šæ¯”éªŒè¯                              â”‚  â”‚
â”‚  â”‚  âœ“ ç¬¬äº”é‡: å¸‚åœºç¯å¢ƒéªŒè¯                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ä»“ä½å±‚ (Position Layer)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         PositionManager (ä»“ä½ç®¡ç†å™¨)                   â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  â€¢ è®¡ç®—ä»“ä½ç³»æ•°                                        â”‚  â”‚
â”‚  â”‚  â€¢ åº”ç”¨é£é™©é™åˆ¶                                        â”‚  â”‚
â”‚  â”‚  â€¢ éªŒè¯æ€»æŒä»“                                          â”‚  â”‚
â”‚  â”‚  â€¢ åŠ¨æ€è°ƒæ•´æ­¢æŸ                                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  æ‰§è¡Œå±‚ (Execution Layer)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         TradingExecutor (äº¤æ˜“æ‰§è¡Œå™¨)                   â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  â†’ å¼€ä»“                                                â”‚  â”‚
â”‚  â”‚  â†’ æ­¢æŸç®¡ç†                                            â”‚  â”‚
â”‚  â”‚  â†’ æ­¢ç›ˆç®¡ç†                                            â”‚  â”‚
â”‚  â”‚  â†’ ä»“ä½ç›‘æ§                                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æµå‘

```
å®æ—¶Kçº¿æ•°æ®
    â†“
å„çº§åˆ«ç‹¬ç«‹åˆ†æ(chan.py) â†’ è¯†åˆ«åˆ†å‹/ç¬”/æ®µ/ä¹°å–ç‚¹
    â†“
ç”Ÿæˆå•çº§åˆ«ä¿¡å·
    â†“
ä¿¡å·ç¼“å­˜ç®¡ç†å™¨ â† æŒ‰æ—¶é—´çª—å£ä¿ç•™æœ‰æ•ˆä¿¡å·
    â†“
å…±æŒ¯æ£€æµ‹å™¨ â†’ å¯»æ‰¾åŒæ–¹å‘ä¿¡å·ç»„åˆ
    â†“
è®¡ç®—å…±æŒ¯å¼ºåº¦ â†’ é‡åŒ–è¯„åˆ†
    â†“
äº”é‡éªŒè¯ â†’ å…¨éƒ¨é€šè¿‡?
    â†“ Yes
è®¡ç®—ä»“ä½ â†’ åŸºäºå¼ºåº¦åŠ¨æ€è°ƒæ•´
    â†“
æ‰§è¡Œäº¤æ˜“ â†’ å¼€ä»“/æ­¢æŸ/æ­¢ç›ˆ
```

---

## ğŸ”§ å…³é”®æ¨¡å—

### 1. å¤šçº§åˆ«å…±æŒ¯æ£€æµ‹å™¨ (MultiLevelResonanceDetector)

**èŒè´£**: æ£€æµ‹ä¸åŒçº§åˆ«ä¿¡å·çš„å…±æŒ¯ç°è±¡

**æ ¸å¿ƒæ–¹æ³•**:

```python
class MultiLevelResonanceDetector:
    def add_signal(self, signal: Signal):
        """æ·»åŠ å•çº§åˆ«ä¿¡å·åˆ°ç¼“å­˜"""
        
    def detect_resonance(self, check_levels: List[str]) -> Optional[ResonanceSignal]:
        """æ£€æµ‹å…±æŒ¯"""
        # 1. æ”¶é›†æ´»è·ƒä¿¡å·
        # 2. æŒ‰ç±»å‹åˆ†ç»„
        # 3. è®¡ç®—å¼ºåº¦
        # 4. è¿”å›æœ€å¼ºå…±æŒ¯
        
    def _calculate_strength(self, signals: List[Signal]) -> float:
        """è®¡ç®—å…±æŒ¯å¼ºåº¦(0-1)"""
```

**ä½¿ç”¨ç¤ºä¾‹**:

```python
detector = MultiLevelResonanceDetector()

# æ·»åŠ ä¸åŒçº§åˆ«çš„ä¿¡å·
detector.add_signal(signal_5m)
detector.add_signal(signal_15m)
detector.add_signal(signal_30m)

# æ£€æµ‹å…±æŒ¯
resonance = detector.detect_resonance(['M5', 'M15', 'M30'])

if resonance and resonance.strength >= 0.65:
    print(f"æ£€æµ‹åˆ°{resonance.grade.value}çº§å…±æŒ¯!")
```

### 2. äº”é‡éªŒè¯å™¨ (FiveLayerValidator)

**èŒè´£**: å¯¹å…±æŒ¯ä¿¡å·è¿›è¡Œä¸¥æ ¼éªŒè¯,è¿‡æ»¤ä¸åˆæ ¼ä¿¡å·

**éªŒè¯ç»´åº¦**:

| éªŒè¯é¡¹ | æ£€æŸ¥å†…å®¹ | å¤±è´¥åæœ |
|-------|---------|---------|
| æ–¹å‘ä¸€è‡´æ€§ | æ‰€æœ‰ä¿¡å·æ˜¯å¦åŒæ–¹å‘(å…¨ä¹°æˆ–å…¨å–) | æ‹’ç»äº¤æ˜“ |
| ç»“æ„å®Œæ•´æ€§ | ç¬”/æ®µ/ä¸­æ¢ç»“æ„æ˜¯å¦æ¸…æ™°å®Œæ•´ | æ‹’ç»äº¤æ˜“ |
| æ—¶é—´æœ‰æ•ˆæ€§ | ä¿¡å·æ˜¯å¦åœ¨æœ‰æ•ˆæœŸå†…,ä»·æ ¼æ˜¯å¦èµ°è¿œ | æ‹’ç»äº¤æ˜“ |
| é£é™©æ”¶ç›Šæ¯” | RRRæ˜¯å¦æ»¡è¶³æœ€ä½è¦æ±‚ | æ‹’ç»äº¤æ˜“ |
| å¸‚åœºç¯å¢ƒ | æ³¢åŠ¨ç‡/è´¢ç»äº‹ä»¶/äº¤æ˜“æ—¶æ®µ | æ‹’ç»äº¤æ˜“ |

**ä½¿ç”¨ç¤ºä¾‹**:

```python
validator = FiveLayerValidator()
passed, failures = validator.validate(resonance)

if passed:
    # æ‰§è¡Œäº¤æ˜“
    execute_trade(resonance)
else:
    print(f"éªŒè¯å¤±è´¥: {failures}")
```

### 3. ä¿¡å·æ•°æ®ç»“æ„

```python
@dataclass
class Signal:
    """å•çº§åˆ«ä¿¡å·"""
    level: str                # M5, M15, M30, H1ç­‰
    signal_type: str          # 1buy, 2buy, 3buy, 1sell, 2sell, 3sell
    timestamp: datetime       # ä¿¡å·ç”Ÿæˆæ—¶é—´
    price: float              # ä¿¡å·ä»·æ ¼
    confidence: float         # ç½®ä¿¡åº¦ 0-1
    structure_detail: Dict    # ç»“æ„è¯¦æƒ…(ç¬”/æ®µ/ä¸­æ¢)

@dataclass  
class ResonanceSignal:
    """å…±æŒ¯ä¿¡å·"""
    signal_type: str              # ä¸»å¯¼ä¿¡å·ç±»å‹
    levels: List[str]             # å‚ä¸çº§åˆ«
    signals: List[Signal]         # æ‰€æœ‰ä¿¡å·
    strength: float               # å…±æŒ¯å¼ºåº¦ 0-1
    grade: ResonanceGrade         # ç­‰çº§ A+/A/B/C/D
    
    # äº¤æ˜“å‚æ•°
    entry_price: float            # å…¥åœºä»·
    stop_loss_price: float        # æ­¢æŸä»·
    target_price: float           # ç›®æ ‡ä»·
    risk_reward_ratio: float      # é£é™©æ”¶ç›Šæ¯”
    position_coefficient: float   # ä»“ä½ç³»æ•°
    
    # éªŒè¯çŠ¶æ€
    validation_passed: bool       # æ˜¯å¦é€šè¿‡éªŒè¯
```

---

## ğŸ”„ å·¥ä½œæµç¨‹

### å®Œæ•´äº¤æ˜“æµç¨‹

```python
# ========== é˜¶æ®µ1: æ•°æ®æ”¶é›† ==========
# æ¯ä¸ªæ–°Kçº¿åˆ°è¾¾æ—¶
for level in ['M5', 'M15', 'M30', 'H1', 'H4']:
    # æ›´æ–°è¯¥çº§åˆ«çš„ç¼ è®ºç»“æ„
    chan_analyzer.update_structure(level, new_kline)
    
    # æ£€æŸ¥æ˜¯å¦æœ‰æ–°çš„ä¹°å–ç‚¹
    if has_new_bsp:
        signal = create_signal(level, bsp)
        detector.add_signal(signal)

# ========== é˜¶æ®µ2: å…±æŒ¯æ£€æµ‹ ==========
resonance = detector.detect_resonance()

if not resonance or resonance.strength < 0.55:
    # å¼ºåº¦ä¸è¶³,ç»§ç»­è§‚æœ›
    return

# ========== é˜¶æ®µ3: äº”é‡éªŒè¯ ==========
passed, failures = validator.validate(resonance)

if not passed:
    # éªŒè¯å¤±è´¥,æ”¾å¼ƒäº¤æ˜“
    log(f"éªŒè¯å¤±è´¥: {failures}")
    return

# ========== é˜¶æ®µ4: ä»“ä½è®¡ç®— ==========
position = calculate_position(
    equity=account.equity,
    resonance=resonance,
    base_risk=0.02
)

if position.lots > account.max_position:
    # è¶…è¿‡æœ€å¤§ä»“ä½é™åˆ¶
    position.lots = account.max_position

# ========== é˜¶æ®µ5: é£æ§æ£€æŸ¥ ==========
if not check_risk_limits(position):
    # é£æ§ä¸é€šè¿‡(å¦‚å·²è¾¾æœ€å¤§æŒä»“æ•°)
    return

# ========== é˜¶æ®µ6: æ‰§è¡Œäº¤æ˜“ ==========
trade = execute_trade(
    direction='buy' if resonance.signals[0].is_buy else 'sell',
    lots=position.lots,
    entry=resonance.entry_price,
    stop_loss=resonance.stop_loss_price,
    take_profit=resonance.target_price
)

# ========== é˜¶æ®µ7: æŒä»“ç®¡ç† ==========
# ç›‘æ§æŒä»“,åŠ¨æ€è°ƒæ•´æ­¢æŸ
while trade.is_open:
    # æ£€æŸ¥ç»“æ„ç ´å
    if check_structure_broken(trade, smallest_level):
        # æ¬¡çº§åˆ«ç ´å â†’ å‡ä»“40%
        partial_close(trade, 0.4)
    
    # æ›´æ–°ç§»åŠ¨æ­¢æŸ
    update_trailing_stop(trade)
    
    # æ£€æŸ¥æ­¢ç›ˆæ¡ä»¶
    if check_take_profit_condition(trade):
        close_trade(trade)
```

### å…³é”®å†³ç­–ç‚¹

```mermaid
graph TD
    A[æ¥æ”¶æ–°Kçº¿] --> B[æ›´æ–°ç¼ è®ºç»“æ„]
    B --> C{æ£€æµ‹åˆ°ä¹°å–ç‚¹?}
    C -->|å¦| A
    C -->|æ˜¯| D[æ·»åŠ ä¿¡å·åˆ°ç¼“å­˜]
    D --> E[æ£€æµ‹å…±æŒ¯]
    E --> F{å¼ºåº¦>=0.55?}
    F -->|å¦| A
    F -->|æ˜¯| G[äº”é‡éªŒè¯]
    G --> H{éªŒè¯é€šè¿‡?}
    H -->|å¦| A
    H -->|æ˜¯| I[è®¡ç®—ä»“ä½]
    I --> J[é£æ§æ£€æŸ¥]
    J --> K{é€šè¿‡?}
    K -->|å¦| A
    K -->|æ˜¯| L[æ‰§è¡Œäº¤æ˜“]
    L --> M[æŒä»“ç®¡ç†]
    M --> N{æŒä»“ç»“æŸ?}
    N -->|å¦| M
    N -->|æ˜¯| A
```

---

## ğŸ’° ä»“ä½ç®¡ç†

### æ ¸å¿ƒå…¬å¼

```python
# åŸºç¡€ä»“ä½è®¡ç®—
position_lots = (equity Ã— base_risk Ã— position_coefficient) / (stop_loss_$ Ã— 100)

# ä»“ä½ç³»æ•°è®¡ç®—
position_coefficient = (
    time_level_coef Ã—       # çº§åˆ«æ•°é‡ç³»æ•°
    structure_level_coef Ã—  # ç»“æ„å¯¹åº”ç³»æ•°
    signal_quality_coef Ã—   # ä¿¡å·è´¨é‡ç³»æ•°
    strength_bonus Ã—        # å¼ºåº¦åŠ æˆ
    freshness_bonus Ã—       # æ—¶æ•ˆæ€§åŠ æˆ
    volatility_bonus        # æ³¢åŠ¨ç‡è°ƒæ•´
)

# é™åˆ¶èŒƒå›´
position_coefficient = min(max(coef, 0.5), 2.5)
position_lots = min(max(lots, 0.01), max_position)
```

### ç³»æ•°å‚è€ƒè¡¨

#### æ—¶é—´çº§åˆ«ç³»æ•°

| å‚ä¸çº§åˆ«æ•° | ç³»æ•° |
|----------|------|
| 1çº§åˆ« | 0.8 |
| 2çº§åˆ« | 1.0 (åŸºå‡†) |
| 3çº§åˆ« | 1.3 |
| 4çº§åˆ« | 1.6 |
| 5çº§åˆ«+ | 2.0 |

#### ä¿¡å·è´¨é‡ç³»æ•°

| ä¿¡å·ç±»å‹ | ç³»æ•° |
|---------|------|
| ä¸€ä¹°/ä¸€å– | 0.7 |
| äºŒä¹°/äºŒå– | 1.0 (åŸºå‡†) |
| ä¸‰ä¹°/ä¸‰å– | 1.3 |

#### å¼ºåº¦åŠ æˆç³»æ•°

| å…±æŒ¯å¼ºåº¦ | åŠ æˆ |
|---------|------|
| >= 0.90 | 1.15 |
| >= 0.80 | 1.10 |
| 0.65-0.79 | 1.00 (åŸºå‡†) |
| < 0.65 | 0.90 |

### å®ä¾‹è®¡ç®—

**åœºæ™¯**: 4çº§åˆ«å¼ºå…±æŒ¯,ä¸‰ä¹°ä¿¡å·,å¼ºåº¦0.87

```python
# è´¦æˆ·å‚æ•°
equity = 10000
base_risk = 0.02  # 2%
stop_loss = $18

# ç³»æ•°è®¡ç®—
time_level_coef = 1.6        # 4ä¸ªçº§åˆ«
signal_quality_coef = 1.3    # ä¸‰ä¹°
strength_bonus = 1.10        # å¼ºåº¦0.87
structure_coef = 1.0         # ç®€åŒ–

total_coef = 1.6 Ã— 1.0 Ã— 1.3 Ã— 1.10 = 2.288

# ä»“ä½è®¡ç®—
position_lots = (10000 Ã— 0.02 Ã— 2.288) / (18 Ã— 100)
              = 457.6 / 1800
              = 0.254æ‰‹

# é™åˆ¶æ£€æŸ¥
position_lots = min(0.254, 0.30) = 0.254æ‰‹ âœ“

# å®é™…é£é™©
actual_risk = 0.254 Ã— 18 Ã— 100 = $457.2 (4.57%)
```

---

## ğŸ›¡ï¸ é£é™©æ§åˆ¶

### ä¸‰çº§é£æ§ä½“ç³»

#### 1ï¸âƒ£ å•ç¬”äº¤æ˜“é™åˆ¶

```python
# ç¡¬æ€§é™åˆ¶
MAX_RISK_PER_TRADE = 0.05      # å•ç¬”æœ€å¤§é£é™©5%
MIN_STOP_LOSS = 5.0            # æœ€å°æ­¢æŸ$5
MAX_STOP_LOSS = 100.0          # æœ€å¤§æ­¢æŸ$100
MAX_POSITION_LOTS = 0.30       # æœ€å¤§ä»“ä½0.30æ‰‹(10Kè´¦æˆ·)
MIN_RISK_REWARD = 1.5          # æœ€å°é£é™©æ”¶ç›Šæ¯”1.5:1
```

#### 2ï¸âƒ£ è´¦æˆ·æ€»ä½“é™åˆ¶

```python
# æ€»æŒä»“é™åˆ¶
MAX_TOTAL_POSITION = 0.50      # æ€»ä»“ä½ä¸è¶…50%
MAX_TOTAL_RISK = 0.08          # æ€»é£é™©ä¸è¶…8%
MAX_CONCURRENT_TRADES = 3      # æœ€å¤š3ä¸ªåŒæ—¶æŒä»“
NO_HEDGING = True              # ç¦æ­¢å¯¹å†²(åŒæ—¶å¤šç©º)
```

#### 3ï¸âƒ£ ç†”æ–­æœºåˆ¶

| çº§åˆ« | è§¦å‘æ¡ä»¶ | åŠ¨ä½œ |
|-----|---------|------|
| ä¸€çº§ç†”æ–­ | å•æ—¥äºæŸâ‰¥3% | åœæ­¢æ–°å¼€ä»“24å°æ—¶ |
| äºŒçº§ç†”æ–­ | å•å‘¨äºæŸâ‰¥6% | å¹³æ‰æ‰€æœ‰ä»“ä½,åœæ­¢äº¤æ˜“72å°æ—¶ |
| ä¸‰çº§ç†”æ–­ | æœ€å¤§å›æ’¤â‰¥15% | åœæ­¢äº¤æ˜“1-2å‘¨,å…¨é¢å¤ç›˜ |
| å››çº§ç†”æ–­ | å›æ’¤â‰¥25% | å®Œå…¨åœæ­¢ç³»ç»Ÿ |

### åˆ†çº§æ­¢æŸæœºåˆ¶

```python
# æ ¹æ®ä¸åŒçº§åˆ«çš„ç ´å,åˆ†æ‰¹æ­¢æŸ

# çº§åˆ«1: æ¬¡çº§åˆ«ç ´å â†’ å‡ä»“40%
if check_structure_broken(smallest_level):
    partial_close(position, 0.4)
    move_stop_to_breakeven(position)

# çº§åˆ«2: ä¸»çº§åˆ«ç ´å â†’ å†å‡ä»“50%
if check_structure_broken(main_level):
    partial_close(position, 0.5)

# çº§åˆ«3: å¤§çº§åˆ«ç ´å â†’ å…¨éƒ¨æ¸…ä»“
if check_structure_broken(largest_level):
    full_close(position)

# çº§åˆ«4: ç¡¬æ­¢æŸ â†’ å¼ºåˆ¶æ­¢æŸ
if price <= stop_loss_price:
    emergency_close(position)
```

---

## ğŸ“ å®æ–½å»ºè®®

### åˆ†é˜¶æ®µå®æ–½è·¯çº¿å›¾

#### ğŸ”µ **ç¬¬ä¸€é˜¶æ®µ: æ ¸å¿ƒåŠŸèƒ½ (1-2ä¸ªæœˆ)**

**ç›®æ ‡**: å®ç°åŸºç¡€çš„å¤šçº§åˆ«å…±æŒ¯æ£€æµ‹

- [x] åˆ›å»º`MultiLevelResonanceDetector`æ¨¡å—
- [ ] å®ç°æ—¶é—´çª—å£ç®¡ç†
- [ ] å®ç°å…±æŒ¯å¼ºåº¦è®¡ç®—
- [ ] å®ç°äº”é‡éªŒè¯æ¡†æ¶
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–ç‡>80%

**éªŒæ”¶æ ‡å‡†**:
- èƒ½æ­£ç¡®è¯†åˆ«2-4çº§åˆ«çš„å…±æŒ¯
- å¼ºåº¦è®¡ç®—åˆç†(ä¸æŠ€æœ¯è§„èŒƒä¸€è‡´)
- éªŒè¯æœºåˆ¶èƒ½è¿‡æ»¤æ˜æ˜¾é”™è¯¯çš„ä¿¡å·

#### ğŸŸ¢ **ç¬¬äºŒé˜¶æ®µ: ä»“ä½ä¸é£æ§ (1ä¸ªæœˆ)**

**ç›®æ ‡**: å®Œå–„ä»“ä½ç®¡ç†å’Œé£æ§ç³»ç»Ÿ

- [ ] å®ç°åŠ¨æ€ä»“ä½è®¡ç®—
- [ ] å®ç°ä¸‰çº§é£æ§é™åˆ¶
- [ ] å®ç°ç†”æ–­æœºåˆ¶
- [ ] å®ç°åˆ†çº§æ­¢æŸ
- [ ] å›æµ‹éªŒè¯3å¹´æ•°æ®

**éªŒæ”¶æ ‡å‡†**:
- å›æµ‹èƒœç‡>65%
- æœ€å¤§å›æ’¤<20%
- é£æ§æœºåˆ¶100%è§¦å‘

#### ğŸŸ¡ **ç¬¬ä¸‰é˜¶æ®µ: ä¼˜åŒ–ä¸æµ‹è¯• (2-3ä¸ªæœˆ)**

**ç›®æ ‡**: ä¼˜åŒ–å‚æ•°,æ¨¡æ‹Ÿç›˜éªŒè¯

- [ ] å‚æ•°ç½‘æ ¼æœç´¢ä¼˜åŒ–
- [ ] å¤„ç†è¾¹ç•Œæƒ…å†µ
- [ ] æ¨¡æ‹Ÿç›˜è¿è¡Œ3ä¸ªæœˆ
- [ ] æ€§èƒ½ä¼˜åŒ–(å¤„ç†å»¶è¿Ÿ<500ms)

**éªŒæ”¶æ ‡å‡†**:
- æ¨¡æ‹Ÿç›˜èƒœç‡>70%
- ç³»ç»Ÿç¨³å®šæ€§>99%
- æ— ä¸¥é‡bug

#### ğŸ”´ **ç¬¬å››é˜¶æ®µ: å®ç›˜éƒ¨ç½² (æŒç»­)**

**ç›®æ ‡**: å°èµ„é‡‘å®ç›˜éªŒè¯

- [ ] $1000-3000èµ·æ­¥
- [ ] é€æ­¥æ‰©å¤§èµ„é‡‘è§„æ¨¡
- [ ] æŒç»­ç›‘æ§ä¸ä¼˜åŒ–

**éªŒæ”¶æ ‡å‡†**:
- å®ç›˜èƒœç‡>60%
- 3ä¸ªæœˆå›æ’¤<15%

### å¼€å‘ä¼˜å…ˆçº§

#### P0 (å¿…é¡»å®ç°)
- å…±æŒ¯æ£€æµ‹æ ¸å¿ƒç®—æ³•
- äº”é‡éªŒè¯æœºåˆ¶
- åŸºç¡€ä»“ä½è®¡ç®—
- ç¡¬æ­¢æŸä¿æŠ¤

#### P1 (é‡è¦)
- åŠ¨æ€ä»“ä½ç³»æ•°
- åˆ†çº§æ­¢æŸ
- ç†”æ–­æœºåˆ¶
- ç»“æ„çº§åˆ«å¯¹åº”

#### P2 (ä¼˜åŒ–)
- å‚æ•°è‡ªé€‚åº”è°ƒæ•´
- é«˜çº§æ­¢ç›ˆç­–ç•¥
- æ€§èƒ½ä¼˜åŒ–
- ç›‘æ§å‘Šè­¦

---

## ğŸ’» ä»£ç ç¤ºä¾‹

### å¿«é€Ÿå¼€å§‹

```python
from app.services.multi_level_resonance import (
    MultiLevelResonanceDetector,
    FiveLayerValidator,
    Signal
)

# 1. åˆ›å»ºæ£€æµ‹å™¨
detector = MultiLevelResonanceDetector()

# 2. æ·»åŠ ä¸åŒçº§åˆ«çš„ä¿¡å·(æ¥è‡ªchan.pyåˆ†æ)
for level in ['M5', 'M15', 'M30', 'H1']:
    signal = Signal(
        level=level,
        signal_type='3buy',
        timestamp=datetime.now(),
        price=42500.0,
        confidence=0.85,
        structure_detail={'bi': {}, 'duan': {}, 'zhongshu': {}}
    )
    detector.add_signal(signal)

# 3. æ£€æµ‹å…±æŒ¯
resonance = detector.detect_resonance()

if resonance:
    print(f"âœ… æ£€æµ‹åˆ°{resonance.grade.value}çº§å…±æŒ¯!")
    print(f"   å¼ºåº¦: {resonance.strength:.2f}")
    print(f"   çº§åˆ«: {', '.join(resonance.levels)}")
    
    # 4. äº”é‡éªŒè¯
    validator = FiveLayerValidator()
    passed, failures = validator.validate(resonance)
    
    if passed:
        # 5. è®¡ç®—ä»“ä½
        equity = 10000
        base_risk = 0.02
        
        position_lots = (
            equity * base_risk * resonance.position_coefficient
        ) / (resonance.stop_loss_distance * 100)
        
        print(f"   å»ºè®®ä»“ä½: {position_lots:.2f}æ‰‹")
        print(f"   å…¥åœºä»·: ${resonance.entry_price:,.2f}")
        print(f"   æ­¢æŸä»·: ${resonance.stop_loss_price:,.2f}")
        print(f"   ç›®æ ‡ä»·: ${resonance.target_price:,.2f}")
```

### ä¸ç°æœ‰ç³»ç»Ÿé›†æˆ

```python
# åœ¨ app/services/chan_strategy.py ä¸­é›†æˆ

from app.services.multi_level_resonance import (
    resonance_detector,
    detect_and_validate_resonance,
    Signal
)

class ChanMultiLevelStrategy:
    def analyze_klines(self, klines: List[Dict], timeframe: str):
        # ç°æœ‰çš„åˆ†æé€»è¾‘...
        analysis_result = self._execute_chan_analysis(klines, timeframe)
        
        # ç”Ÿæˆäº¤æ˜“ä¿¡å·
        signals = self._generate_trading_signals(analysis_result, timeframe)
        
        # ğŸ†• æ·»åŠ åˆ°å…±æŒ¯æ£€æµ‹å™¨
        for signal_dict in signals:
            signal = Signal(
                level=timeframe,
                signal_type=signal_dict['signal_type'],
                timestamp=signal_dict['timestamp'],
                price=signal_dict['price'],
                confidence=signal_dict['confidence'],
                structure_detail={
                    'bi': analysis_result.get('bis', []),
                    'duan': analysis_result.get('duans', []),
                    'zhongshu': analysis_result.get('zhongshus', [])
                }
            )
            resonance_detector.add_signal(signal)
        
        # ğŸ†• æ£€æµ‹å¤šçº§åˆ«å…±æŒ¯
        resonance = detect_and_validate_resonance()
        
        if resonance:
            # æ·»åŠ å…±æŒ¯ä¿¡æ¯åˆ°è¿”å›ç»“æœ
            result['resonance'] = {
                'detected': True,
                'strength': resonance.strength,
                'grade': resonance.grade.value,
                'levels': resonance.levels,
                'entry_price': resonance.entry_price,
                'stop_loss': resonance.stop_loss_price,
                'target_price': resonance.target_price,
                'risk_reward_ratio': resonance.risk_reward_ratio,
                'position_coefficient': resonance.position_coefficient
            }
        
        return result
```

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### ç›®æ ‡æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | å¤‡æ³¨ |
|-----|-------|------|
| å›æµ‹èƒœç‡ | â‰¥70% | 3å¹´å†å²æ•°æ® |
| å®ç›˜èƒœç‡ | â‰¥60% | è€ƒè™‘æ»‘ç‚¹å’Œæƒ…ç»ª |
| ç›ˆäºæ¯” | â‰¥2:1 | å¹³å‡æ°´å¹³ |
| æœ€å¤§å›æ’¤ | â‰¤20% | å›æµ‹æ•°æ® |
| å¤æ™®æ¯”ç‡ | â‰¥1.5 | å¹´åŒ–æ”¶ç›Š/æ³¢åŠ¨ç‡ |
| ä¿¡å·é¢‘ç‡ | 1-3æ¬¡/å‘¨ | é«˜è´¨é‡ä¿¡å· |
| å¤„ç†å»¶è¿Ÿ | <500ms | å®æ—¶å“åº” |

### ç›‘æ§æŒ‡æ ‡

```python
# å®æ—¶ç›‘æ§
MONITOR_METRICS = {
    'current_equity': 'å½“å‰å‡€å€¼',
    'unrealized_pnl': 'æµ®åŠ¨ç›ˆäº',
    'today_pnl': 'ä»Šæ—¥ç›ˆäº',
    'current_drawdown': 'å½“å‰å›æ’¤',
    'open_positions': 'æŒä»“æ•°',
    'total_risk_exposure': 'æ€»é£é™©æš´éœ²',
    'active_signals_count': 'æ´»è·ƒä¿¡å·æ•°',
    'last_resonance_strength': 'æœ€è¿‘å…±æŒ¯å¼ºåº¦',
    'system_status': 'ç³»ç»ŸçŠ¶æ€'
}
```

---

## ğŸ“ å­¦ä¹ èµ„æº

### æ¨èé˜…è¯»é¡ºåº

1. **åŸºç¡€ç†è®º** (ä¼˜å…ˆ)
   - ğŸ“– `CHAN_STRATEGY_GUIDE.md` - ç­–ç•¥ä½¿ç”¨æŒ‡å—
   - ğŸ“– `doc/ç¼ è®ºåˆ†ææ¨¡å—/ç¼ è®ºåˆ†ææ¨¡å—.md` - ç¼ è®ºåŸºç¡€

2. **æŠ€æœ¯è§„èŒƒ** (é‡è¦)
   - ğŸ“– `doc/ç¼ è®ºåˆ†ææ¨¡å—/chan_multilevel_spec.md` - å¤šçº§åˆ«è§„èŒƒ(é‡ç‚¹!)
   - ğŸ“– æœ¬æ–‡æ¡£ - è®¾è®¡æ–¹æ¡ˆ

3. **ä»£ç å®ç°**
   - ğŸ’» `app/services/multi_level_resonance.py` - æ ¸å¿ƒä»£ç 
   - ğŸ’» `examples/multi_level_strategy_example.py` - ä½¿ç”¨ç¤ºä¾‹

4. **å®è·µæµ‹è¯•**
   - ğŸ§ª è¿è¡Œç¤ºä¾‹ä»£ç 
   - ğŸ§ª å›æµ‹å†å²æ•°æ®
   - ğŸ§ª æ¨¡æ‹Ÿç›˜éªŒè¯

---

## â“ å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆéœ€è¦äº”é‡éªŒè¯?

**A**: å…±æŒ¯æ£€æµ‹åªæ˜¯ç¬¬ä¸€æ­¥,éªŒè¯æœºåˆ¶ç”¨äºè¿‡æ»¤æ‰ä»¥ä¸‹æƒ…å†µ:
- çº§åˆ«æ–¹å‘çŸ›ç›¾(å¦‚å°å‘¨æœŸä¹°,å¤§å‘¨æœŸå–)
- ç»“æ„ä¸æ¸…æ™°(åˆ†å‹æ¨¡ç³Š,ç¬”æ®µä¸å®Œæ•´)
- ä¿¡å·è¿‡æœŸ(ä»·æ ¼å·²èµ°è¿œ)
- é£é™©æ”¶ç›Šæ¯”å·®(<1.5:1)
- å¸‚åœºç¯å¢ƒä¸åˆ©(è´¢ç»æ•°æ®,å¼‚å¸¸æ³¢åŠ¨)

æ²¡æœ‰éªŒè¯çš„ä¿¡å·èƒœç‡å¯èƒ½åªæœ‰50%,åŠ ä¸Šäº”é‡éªŒè¯åå¯æå‡åˆ°70%+ã€‚

### Q2: æ—¶é—´çª—å£å¦‚ä½•è®¾ç½®?

**A**: åŸºäºç»éªŒå€¼:
```python
M5:  15åˆ†é’Ÿ  (3å€å‘¨æœŸ)
M15: 45åˆ†é’Ÿ  (3å€å‘¨æœŸ)
M30: 90åˆ†é’Ÿ  (3å€å‘¨æœŸ)
H1:  180åˆ†é’Ÿ (3å€å‘¨æœŸ)
H4:  480åˆ†é’Ÿ (2å€å‘¨æœŸ)
```

å¯ä»¥æ ¹æ®å›æµ‹ç»“æœå¾®è°ƒã€‚

### Q3: ä»“ä½ç³»æ•°èŒƒå›´ä¸ºä»€ä¹ˆæ˜¯[0.5, 2.5]?

**A**: 
- **ä¸‹é™0.5**: å³ä½¿æ˜¯å¼±ä¿¡å·ä¹Ÿä¿ç•™ä¸€å®šå‚ä¸æœºä¼š
- **ä¸Šé™2.5**: é˜²æ­¢è¿‡åº¦æ¿€è¿›,æ§åˆ¶å•ç¬”é£é™©
- **åŸºå‡†1.0**: 2çº§åˆ«æ ‡å‡†å…±æŒ¯çš„æ­£å¸¸ä»“ä½

å®é™…ä½¿ç”¨ä¸­å»ºè®®ä¿å®ˆä¸€äº›,å¯ä»¥è®¾ä¸º[0.6, 2.0]ã€‚

### Q4: å¦‚ä½•å¤„ç†çº§åˆ«çŸ›ç›¾?

**A**: ä¸¥æ ¼éµå¾ª"æ–¹å‘ä¸€è‡´æ€§"åŸåˆ™:
- å¤§çº§åˆ«ä¼˜å…ˆ: æ—¥çº¿çœ‹è·Œæ—¶,ä¸åšå°å‘¨æœŸä¹°å…¥
- çŸ›ç›¾æ—¶è§‚æœ›: çº§åˆ«æ–¹å‘ä¸ä¸€è‡´æ—¶,ç­‰å¾…ç»Ÿä¸€
- ä¸å¼ºè¡Œäº¤æ˜“: å®å¯é”™è¿‡,ä¸åšé”™

### Q5: å…±æŒ¯æ£€æµ‹å»¶è¿Ÿä¼šå½±å“å…¥åœºå—?

**A**: æœ‰ä¸€å®šå½±å“,ä½†å¯æ§:
- æ—¶é—´çª—å£æœºåˆ¶å…è®¸ä¿¡å·å…ˆåå‡ºç°
- æœ€æ–°ä¿¡å·çš„ä»·æ ¼ä½œä¸ºå…¥åœºå‚è€ƒ
- éªŒè¯æ—¶æ£€æŸ¥ä»·æ ¼æ˜¯å¦å·²èµ°è¿œ(>1%)
- å¦‚å·²èµ°è¿œ,ç­‰å¾…å›è°ƒæˆ–æ”¾å¼ƒ

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- **é¡¹ç›®åœ°å€**: https://github.com/your-project/turtle
- **é—®é¢˜åé¦ˆ**: æäº¤GitHub Issues
- **å‚è€ƒè§„èŒƒ**: `doc/ç¼ è®ºåˆ†ææ¨¡å—/chan_multilevel_spec.md`

---

**å…è´£å£°æ˜**: æœ¬ç­–ç•¥ä»…ä¾›å­¦ä¹ ç ”ç©¶,ä¸æ„æˆæŠ•èµ„å»ºè®®ã€‚å®é™…äº¤æ˜“æœ‰é£é™©,è¯·è°¨æ…æ“ä½œã€‚

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-10-18  
**ä½œè€…**: AI Assistant

